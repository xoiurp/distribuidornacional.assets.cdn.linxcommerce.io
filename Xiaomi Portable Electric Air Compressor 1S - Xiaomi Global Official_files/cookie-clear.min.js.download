!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.cookiePolicy=t():e.cookiePolicy=t()}(self,(()=>(()=>{"use strict";var e={493:function(e,t,o){var i=this&&this.__read||function(e,t){var o="function"==typeof Symbol&&e[Symbol.iterator];if(!o)return e;var i,n,r=o.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){n={error:e}}finally{try{i&&!i.done&&(o=r.return)&&o.call(r)}finally{if(n)throw n.error}}return a};Object.defineProperty(t,"__esModule",{value:!0}),t.scmCookieLevelConfig=t.scmCookiePolicyConfig=t.scmCookieDomain=t.scmOneTrackConfig=t.scmStatDomainId=void 0;var n=o(254),r={in:[108,121,124,124],id:[109,126,128,128],de:[710,711,592,592],nl:[579,580,591,591],es:[138,139,605,605],fr:[571,572,573,573],it:[524,525,589,589],uk:[577,578,590,590],ru:[132,575,587,587],hk:[103,129,604,604],tw:[104,120,127,127],default:[0,0,0,0]},a={default:{APP_ID:"2882303761517399893",PRO_ID:"16"}};t.scmStatDomainId=function(e){var t=i(r[e]||r.default,4);return{pc:t[0],m:t[1],app:t[2],ios:t[3]}},t.scmOneTrackConfig=function(e){return a[e]||a.default},t.scmCookiePolicyConfig=function(e){return(0,n.scmStatConfig)(e).cookiePolicyLevel},t.scmCookieLevelConfig=function(e){return(0,n.scmStatConfig)(e).cookieDefaultOnCat},t.scmCookieDomain=function(e){return(0,n.scmStatConfig)(e).cookieDomain}},692:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getGoSiteUrl=t.getLocalString=t.isSessionStorageSupport=t.isLocalStorageSupport=t.getMatchCookie=t.getDeleteCookiesType=t.judgePreInCur=void 0;var o=function(e){if(!e.trim())return e;var t=e.match(/[0-9]+/g)||[];return(null==t?void 0:t.join(","))||""};t.judgePreInCur=function(e,t){return e=o(e),(t=o(t)).includes(e)},t.getDeleteCookiesType=function(e,t){e=o(e),t=o(t);var i=e.split(","),n=t.split(",");return i.filter((function(e){return!n.includes(e)}))},t.getMatchCookie=function(e){var t=document.cookie;if(t)return t.split(";").map((function(t){return!!t.split("=")[0].trim().includes(e)&&t.split("=")[0].trim()})).filter((function(e){return!!e}))},t.isLocalStorageSupport=function(){var e="temp";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(e){return!1}},t.isSessionStorageSupport=function(){var e="temp";try{return sessionStorage.setItem(e,e),sessionStorage.removeItem(e),!0}catch(e){return!1}},t.getLocalString=function(){var e=!!document&&document.querySelector("html");return!!e&&e.getAttribute("data-ot-local")||(window.location.pathname||"/").split("/")[1]||""},t.getGoSiteUrl=function(e){var t=window.location.host,o=t.includes("test")||t.includes("dev")?{default:"//go-buy.test.mi.com/".concat(e)}:{cz:"//ams-go.buy.mi.com/".concat(e),fr:"//ams-go.buy.mi.com/".concat(e),es:"//ams-go.buy.mi.com/".concat(e),de:"//ams-go.buy.mi.com/".concat(e),ro:"//ams-go.buy.mi.com/".concat(e),nl:"//ams-go.buy.mi.com/".concat(e),uk:"//ams-go.buy.mi.com/".concat(e),it:"//ams-go.buy.mi.com/".concat(e),pl:"//ams-go.buy.mi.com/".concat(e),"be-fr":"//ams-go.buy.mi.com/".concat(e),"be-nl":"//ams-go.buy.mi.com/".concat(e),in:"//in-go.buy.mi.com/".concat(e),ru:"//ru-go.buy.mi.com/".concat(e),id:"//go.buy.mi.co.id/".concat(e),se:"//ams-go.buy.mi.com/".concat(e),default:"//go.buy.mi.com/".concat(e)};return o[e]||o.default}},430:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.cookies=void 0,t.cookies=function(e,t,o){if(arguments.length>1&&"[object Object]"!==String(t)){if(o=Object.assign({},o),null==t&&(o.expires=-1),"number"==typeof o.expires){var i=o.expires,n=o.expires=new Date;n.setDate(n.getDate()+i)}return t=String(t),document.cookie=[encodeURIComponent(e),"=",o.raw?t:encodeURIComponent(t),o.expires?"; expires="+o.expires.toUTCString():"",o.path?"; path="+o.path:"",o.domain?"; domain="+o.domain:"",o.secure?"; secure":""].join("")}var r,a=(o=t||{}).raw?function(e){return e}:decodeURIComponent;return(r=new RegExp("(?:^|; )"+encodeURIComponent(e)+"=([^;]*)").exec(document.cookie))?a(o.raw?r[1]:r[1].replace(/\+/g,"%20")):null}},31:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deleteCookies=void 0;var i=o(430),n=o(692);t.deleteCookies=function(e){var t=(0,n.getLocalString)(),o=e.trim();e.includes("xxx")?((0,n.getMatchCookie)(e.replace("xxx",""))||[]).forEach((function(e){(0,i.cookies)(e,null,{path:"/".concat(t),domain:".mi.com"}),(0,i.cookies)(e,null,{path:"/",domain:".mi.com"})})):((0,i.cookies)(o,null,{path:"/".concat(t),domain:".mi.com"}),(0,i.cookies)(o,null,{path:"/",domain:".mi.com"}))}},117:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deleteSessionStorage=t.deleteLocalStorage=void 0;var i=o(692);t.deleteLocalStorage=function(e){var t=(0,i.getLocalString)(),o=e.split("__");if((0,i.isLocalStorageSupport)())try{if(2===o.length&&o[0]===t){var n=JSON.parse(localStorage.getItem(t)||"{}");delete n[o[1]],Object.keys(n).length?localStorage.setItem(t,JSON.stringify(n)):localStorage.removeItem(t)}else localStorage.removeItem(e)}catch(e){console.debug(e)}},t.deleteSessionStorage=function(e){var t=(0,i.getLocalString)(),o=e.split("__");if((0,i.isSessionStorageSupport)())try{if(2===o.length&&o[0]===t){var n=JSON.parse(sessionStorage.getItem(t)||"{}");if(delete n[o[1]],Object.keys(n).length)try{sessionStorage.setItem(t,JSON.stringify(n))}catch(e){console.debug(e)}else sessionStorage.removeItem(t)}else sessionStorage.removeItem(e)}catch(e){console.debug(e)}}},338:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getDataFromService=void 0,t.getDataFromService=function(e){var t=e.url,o=e.type,i=e.success,n=window;n.getAjax=function(){var e=function(){var e=null;try{e=new XMLHttpRequest}catch(t){try{e=new ActiveXObject("Msxml2.XMLHTTP")}catch(t){e=new ActiveXObject("Microsoft.XMLHTTP")}}return e}();e.onreadystatechange=function(){if(4===e.readyState&&200===e.status){var t=JSON.parse(e.responseText),o={errNo:(null==t?void 0:t.error)||0,data:(null==t?void 0:t.data)||{}};return i&&i(o)}},e.open(o,t,!0),e.withCredentials=!0,e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.send("")},n.getAjax()}},509:function(e,t,o){var i=this&&this.__read||function(e,t){var o="function"==typeof Symbol&&e[Symbol.iterator];if(!o)return e;var i,n,r=o.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){n={error:e}}finally{try{i&&!i.done&&(o=r.return)&&o.call(r)}finally{if(n)throw n.error}}return a},n=this&&this.__spreadArray||function(e,t,o){if(o||2===arguments.length)for(var i,n=0,r=t.length;n<r;n++)!i&&n in t||(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.dealCookiesAndStorage=void 0;var r=o(493),a=o(692),c=o(430),u=o(338),l=o(31),s=o(117),d=o(3),m=function(e,t){var o=["required","functional","advertising","analytical"],r=(0,a.getLocalString)(),c=[];e.forEach((function(e){var r,a;(null===(r=t[o[e]])||void 0===r?void 0:r.keys.length)&&c.push.apply(c,n([],i(null===(a=t[o[e]])||void 0===a?void 0:a.keys),!1))})),c.forEach((function(e){var t=e.name.replace("local",r);switch(e.type){case 0:(0,l.deleteCookies)(t);break;case 1:(0,s.deleteLocalStorage)(t);break;case 2:(0,s.deleteSessionStorage)(t)}}))};t.dealCookiesAndStorage=function(){var e="1"===(0,c.cookies)("ISAPP")||"1"===(0,c.cookies)("ISIOS"),t=(0,a.getLocalString)(),o=(0,c.cookies)("policy_notice_pre")||"0,1,2,3:",i=(0,c.cookies)("notice_gdpr_prefs")||(0,r.scmCookieLevelConfig)(t),n=(0,a.getDeleteCookiesType)(o,i),l=(0,a.getDeleteCookiesType)("0,1,2,3:",i);(0,c.cookies)("notice_gdpr_prefs_copy",i,{path:"/"+t,domain:".mi.com",expires:395}),(0,a.judgePreInCur)(o,i)&&(0,c.cookies)("policy_notice_pre",i,{path:"/"+t,domain:".mi.com",expires:395}),(0,d.setXmuuid)(),(0,d.listenXmuuidChange)(),(0,u.getDataFromService)({url:"".concat((0,a.getGoSiteUrl)(t),"/base/cookie-config?location=").concat(encodeURIComponent(window.location.href)),type:"GET",success:function(t){var o;e||t.errNo||(n.length&&m(n,t.data),(null===(o=null==t?void 0:t.data)||void 0===o?void 0:o.auto_clear)&&l.length&&m(l,t.data))}}),(0,c.cookies)("policy_notice_pre",i,{path:"/"+t,domain:".mi.com",expires:395})};var g=window;function f(){g.requestIdleCallback?g.requestIdleCallback((function(e){e.timeRemaining()>0&&(0,t.dealCookiesAndStorage)()})):(0,t.dealCookiesAndStorage)()}g.addEventListener?g.addEventListener("load",f):g.attachEvent&&g.attachEvent("onload",f)},3:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.listenXmuuidChange=t.setXmuuid=void 0;var i=o(430),n=o(692);function r(){return(0,i.cookies)("xmuuid")}function a(){var e;try{return null===(e=localStorage.getItem("xmuuid"))||void 0===e?void 0:e.split("_")[0]}catch(e){return""}}function c(e){(0,i.cookies)("xmuuid",e,{expires:90,path:"/",domain:".mi.com"})}function u(e,t){try{localStorage.setItem("xmuuid","".concat(e,"_").concat(t))}catch(e){console.debug(e)}}t.setXmuuid=function(){var e,t=r(),o=a(),i=(0,n.getLocalString)().toUpperCase(),l=function(){var e="";try{e=localStorage.getItem("xmuuid")||""}catch(e){console.debug(e)}if(!e)return"";var t=e.split("_");return 2===t.length?t[1]:""}();if(t){if(!o)return u(t,i);if(l!==i)return u(t,i);if(t!==o)return c(o)}else{if(o&&l===i)return c(o);var s=("XMGUEST",e="".concat(1e7,"-").concat(1e3,"-").concat(4e3,"-").concat(8e3,"-").concat(1e11).replace(/[018]/g,(function(e){return((t=parseInt(e))^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16);var t})),"".concat("XMGUEST","-").concat(e).toUpperCase());u(s,i),c(s)}},t.listenXmuuidChange=function(){var e=0,t=a(),o=window.setInterval((function(){r()!==t&&c(t),++e>33&&window.clearInterval(o)}),300)}},254:function(e,t){var o=this&&this.__read||function(e,t){var o="function"==typeof Symbol&&e[Symbol.iterator];if(!o)return e;var i,n,r=o.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){n={error:e}}finally{try{i&&!i.done&&(o=r.return)&&o.call(r)}finally{if(n)throw n.error}}return a};Object.defineProperty(t,"__esModule",{value:!0}),t.scmStatConfig=void 0;var i={in:[108,124,124],id:[109,128,128],de:[710,592,592],nl:[579,591,591],es:[138,605,605],fr:[571,573,573],it:[524,589,589],uk:[577,590,590],ru:[132,587,587],hk:[103,604,604],tw:[104,127,127],default:[0,0,0]},n={default:{APP_ID:"2882303761517399893",PRO_ID:"16"}},r={cz:"high",ar:"high",es:"high",fr:"high",it:"high",uk:"high",de:"high",pe:"high",pl:"high",se:"high",global:"high",tr:"high",nl:"high",gr:"high",mx:"middle",at:"high",hu:"high",kz:"high","kz-ru":"high","kz-kk":"high",rs:"high",ro:"high",bg:"high",co:"high",sg:"high",kr:"high",au:"high",be:"high","be-fr":"high","be-nl":"high",vn:"middle",cl:"high",default:"low"};function a(e){var t=o(i[e]||i.default,3);return{web:t[0],app:t[1],ios:t[2]}}function c(e){return n[e]||n.default}function u(e){return r[e]||r.default}function l(e){return"high"!==r[e]?"0,1,2,3:":"0:"}function s(e){return"id"===e?".mi.co.id":".mi.com"}t.scmStatConfig=function(e){var t=(e||"").split("-")[0];return{domainId:a(t),oneTrack:c(t),cookieDomain:s(t),cookieDefaultOnCat:l(t),cookiePolicyLevel:u(t)}}}},t={},o=function o(i){var n=t[i];if(void 0!==n)return n.exports;var r=t[i]={exports:{}};return e[i].call(r.exports,r,r.exports,o),r.exports}(509);return o.default})()));