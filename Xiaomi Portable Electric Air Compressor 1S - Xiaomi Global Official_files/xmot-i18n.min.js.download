!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.xmot=t():e.xmot=t()}(self,(()=>(()=>{var e={126:(e,t)=>{"use strict";var r=function(){return r=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};function n(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r}function i(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function o(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a}function a(e,t,r){if(r||2===arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))}"function"==typeof SuppressedError&&SuppressedError;var c=["SCRIPT","STYLE","META","HEAD","LINK"],s={SVG:2,IMG:2,BACKGROUND_IMAGE:2,CANVAS:4,OBJECT:4,EMBED:4,VIDEO:4},u=100,d=function(e,t){return t?t+e:e},l=function(e){if(0!==e.length)return e[e.length-1]-e[0]},p=function(e,t){void 0===t&&(t=u);var r=Date.now();return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var c=Date.now();if(t-(c-r)<=0)return r=Date.now(),e.apply(void 0,a([],o(n),!1))}},m=function(e,t){return void 0===t&&(t=""),(t||Array(e).fill("x").join("")).replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))},f=function(e){if(!e)return"";var t=e,r=t.localName,n=t.id,i=void 0===n?"":n,o=t.className,a=void 0===o?"":o,c="string"==typeof a?null==a?void 0:a.split(" ").join("."):"";return"".concat(r).concat(i?"#"+i:"").concat(c?"."+c:"")},h=function(e,t){return t.some((function(t){return"[object RegExp]"===Object.prototype.toString.call(t)?new RegExp(t).test(e):e.includes(String(t))}))},v=function(e,t,r){void 0===e&&(e="");var n=!!t&&h(e,t);return(!r||h(e,r))&&!n},g=function(e){return void 0===e&&(e=0),Math.round(e)||0},y=function(e,t){if(0===t.length)return{start:0,end:0,duration:0,maxDurationEntry:null,entryList:[]};var r=t.sort((function(e,t){return e.start===t.start?t.end-e.end:e.start-t.start})),n=0,i=0,o={},a=r.map((function(t){var r=t||{},a=r.name,c=r.start,s=r.end,u=g(s-c),d=Math.max(g(c-e),0),l=g(d+u);s>=i&&(c<i?s>i&&(n+=g(s-i),i=g(s)):(n+=u,i=g(s)));var p={name:a,start:d,end:l,duration:u};return u>(o.duration||0)&&(o=p),p}));return{start:r[0].start-e,end:i-e,duration:n,maxDurationEntry:o,entryList:a}},_=Object.prototype.toString,w=function(e,t){return _.call(e)==="[object ".concat(t,"]")},b=function(e){return w(e,"String")},S=Array.isArray,T=function(e,t){return void 0===t&&(t=[]),r=e,void 0===(n=t)&&(n=[]),void 0===i&&(i=!1),n.some((function(e){return function(e,t,r){return void 0===r&&(r=!1),!!b(e)&&(w(t,"RegExp")?t.test(e):!!b(t)&&(r?e===t:e.includes(t)))}(r,e,i)}));var r,n,i},I=function(e,t,r){var n,i=t>0&&r>0;if(!i)return i;var o=null===(n=window.getComputedStyle)||void 0===n?void 0:n.call(window,e,null);return o&&(i=i&&"none"!==o.display&&"0"!==o.opacity),i};function E(e,t){var r=e.getBoundingClientRect();if("viewport"===t)return r;for(var n=function(e){return e.offsetParent||e.parentElement},i=function(e){return"fixed"===window.getComputedStyle(e).position},o=n(e),a=i(e),c=0;null!==o&&!a&&c<20&&(c++,!(a=i(o)));)o=n(o);if(a)return r;var s=r.top+document.documentElement.scrollTop,u=r.left+document.documentElement.scrollLeft;return{x:r.x,y:r.y,width:r.width,height:r.height,right:u+r.width,bottom:s+r.height,top:s,left:u}}function O(e,t){void 0===t&&(t=window);var r=t.getComputedStyle(e).getPropertyValue("background-image");return r&&"initial"!==r&&"none"!==r?r.split(",").map((function(e){var r=e.trim().match(/url\(["']?(.*?)["']?\)/);return r?C(r[1],t):null})).filter((function(e){return null!==e})):[]}function C(e,t){var r=t.location.protocol;return/^\/\//.test(e)?r+e:(/^https?:\/\//i.test(e),e)}function N(e,t){return t?"number"==typeof t?t:"string"==typeof t&&t.startsWith("*")?e*parseInt(t.substring(1),10):e:e}var k,A=function(){function e(e,t){if(void 0===t&&(t=window),this.win=window,this.excludeRequests=[],this.includeRequests=[],this.withResourceType=[],this.requestContainer=[],this.traceConfig={},this.currentPath="",this.requestList=[],this.traceId="",this.traceCount=0,this.containerMap={},e){var r=e.excludeRequests,n=e.includeRequests,i=e.withResourceType,o=e.traceConfig,a=e.requestContainer;this.win=t,this.excludeRequests=r,this.includeRequests=n,this.withResourceType=i,this.traceConfig=o||[],this.requestContainer=a||[],this.currentPath=t.location.href,this.resetTrace()}}return e.prototype.requestObserver=function(e){var t=this;e&&(this.rewriteXHR(),this.recordFetch()),this.requestContainer.length&&this.requestContainer.forEach((function(e){var r,n=null===(r=t.win.document.querySelector(e))||void 0===r?void 0:r.contentWindow;!t.containerMap[e]&&n&&(t.containerMap[e]=n,t.rewriteXHR(n),t.recordFetch(n))}))},e.prototype.resetReqList=function(){this.requestList=[]},e.prototype.resetTrace=function(){this.traceCount=0,this.traceId=m(32)},e.prototype.getTraceId=function(){return"01-".concat(this.traceId,"-").concat(m(16),"-01")},e.prototype.withoutReq=function(){return 0===this.requestList.length},e.prototype.checkPathname=function(){this.currentPath!==this.win.location.href&&(this.resetTrace(),this.currentPath=this.win.location.href)},e.prototype.isIncludeReq=function(e){return void 0===e&&(e=""),v("string"==typeof e?e:e.href,this.excludeRequests,this.includeRequests)},e.prototype.sameReq=function(e,t){return e===t||(null==t?void 0:t.includes(e))},e.prototype.getReqEndTime=function(e){var t,r=this,n=null!==(t=this.requestList.findIndex((function(t){return r.sameReq(t,e)})))&&void 0!==t?t:-1,i=this.requestList[n];i&&this.sameReq(i,e)&&this.requestList.splice(n,1)},e.prototype.getHttpTime=function(e){var t=this,r=e.beginTime,n=void 0===r?0:r,i=e.endTime,o=e.win,a=(void 0===o?this.win:o).performance.getEntries(),c=["xmlhttprequest","fetch"].concat(this.withResourceType||[]),s=a.filter((function(e){return c.includes(e.initiatorType)&&e.startTime>=n&&e.responseEnd<=i&&t.isIncludeReq(e.name)}));return y(n,s.map((function(e){return{name:e.name,start:e.startTime,end:e.responseEnd}})))},e.prototype.needTrace=function(e){var t,r,n;return this.checkPathname(),(null===(t=this.traceConfig)||void 0===t?void 0:t.enable)&&(!e.includes("//")||e.includes(this.win.location.host)||(null===(n=null===(r=this.traceConfig)||void 0===r?void 0:r.domains)||void 0===n?void 0:n.some((function(t){return e.includes(t)}))))},e.prototype.getTraceHeader=function(){var e;return(null===(e=this.traceConfig)||void 0===e?void 0:e.customHeader)||"MITFE-Trace"},e.prototype.rewriteXHR=function(e){void 0===e&&(e=this.win);var t=this,r=e.XMLHttpRequest,n=r.prototype.open;r.prototype.open=function(e,r){var i=n.apply(this,arguments),o=r instanceof URL?r.href:r;return t.isIncludeReq(o)&&t.requestList.push(o),t.needTrace(r)&&(this.setRequestHeader(t.getTraceHeader(),t.getTraceId()),t.traceCount++),i};var i=r.prototype.send;r.prototype.send=function(){var e=this,r=function(){t.getReqEndTime(e.responseURL||e.__zone_symbol__xhrURL)};return this.addEventListener("loadend",r,!1),this.addEventListener("timeout",r,!1),i.apply(this,arguments)}},e.prototype.recordFetch=function(e){void 0===e&&(e=this.win);var t=this,r=e.fetch;e.fetch=function(e,n){var i=e,o={};o="Request"in Window&&i instanceof Window.Request?i:n||o;var a="string"==typeof i?i:o.url;if(t.isIncludeReq(a)&&t.requestList.push(a),t.needTrace(a)){var c=t.getTraceHeader(),s=t.getTraceId();e instanceof Request&&e.headers?(e.headers.set(c,s),t.traceCount++):n&&n.headers&&(n.headers[c]=s,t.traceCount++)}return r(e,n).then((function(e){return t.getReqEndTime(e.url),e}))}},e}(),P=function(){function e(){this.id=new Date,this.subs=[],this.id=new Date,this.subs=[]}return e.prototype.defined=function(){e.watch.add(this)},e.prototype.notify=function(){this.subs.forEach((function(e){if("function"==typeof e.update)try{e.update.apply(e)}catch(e){console.warn(e)}}))},e.watch=null,e}(),x=function(){function e(e,t){this.name="",this.id=new Date,this.name=e,this.id=new Date,this.callBack=t}return e.prototype.add=function(e){e.subs.push(this)},e.prototype.update=function(){(0,this.callBack)(this.name)},e}(),R=(k=new P,function(e,t){if("historyChange"===e)return function(e,t){var r=new x(e,t);P.watch=r,k.defined(),P.watch=null};if("pushState"===e||"replaceState"===e){var r=t.history[e];return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];r.apply(t.history,e),k.notify()}}}),L="0.1.16-alpha.5",D=function(){function e(e){var t=void 0===e?{}:e,r=t.ww,n=t.wh,i=t.eleWeight,o=t.calcType,a=t.domFilter;this.initScrollTop=0,this.initScrollLeft=0,this.calcType="viewport",this.ww=window.innerWidth,this.wh=window.innerHeight,this.eleWeight=s,this.ww=N(this.ww,r),this.wh=N(this.wh,n),this.eleWeight=Object.assign(this.eleWeight,i),this.calcType=null!=o?o:this.calcType,this.domFilter=a}return e.prototype.filterResult=function(e){if(1===e.length)return e;var t=0;e.forEach((function(e){t+=e.st}));var r=t/e.length;return e.filter((function(e){return e.st>r}))},e.prototype.getTreeScore=function(e,t){var r,n;if(e){var o=[],a=Array.from(e.children);try{for(var c=i(a),s=c.next();!s.done;s=c.next()){var u=s.value;if(u.getAttribute("fmp-c")){var d=this.getTreeScore(u,t);d.st&&o.push(d)}}}catch(e){r={error:e}}finally{try{s&&!s.done&&(n=c.return)&&n.call(c)}finally{if(r)throw r.error}}var l=e instanceof Element?e:e.host;return l?this.calculateScore(l,o,t):{dps:o,st:0,els:[]}}},e.prototype.calculateScore=function(e,t,r){void 0===r&&(r=window);var n=this.calculateAreaParent(e);if(0===n&&"document"===this.calcType)return{dps:t,st:0,els:[]};var i=0;t.forEach((function(e){i+=e.st}));var o=this.eleWeight[e.tagName]||1,a=O(e,r);1===o&&a.length>0&&(o=this.eleWeight.BACKGROUND_IMAGE);var c=n*o,s=[{$node:e,st:c,weight:o}],u=e;return(i>c||0===n)&&(c=i,s=[],t.forEach((function(e){s=s.concat(e.els)}))),{dps:t,st:c,els:s,root:u}},e.prototype.calculateAreaParent=function(e){var t=E(e,this.calcType),r=t.left,n=t.right,i=t.top,o=t.bottom,a=t.width,c=t.height;if(!I(e,a,c))return 0;if(this.domFilter&&!this.domFilter(t,e))return 0;"document"===this.calcType&&(i-=this.initScrollTop,o-=this.initScrollTop,r-=this.initScrollLeft,n-=this.initScrollLeft);var s=this.ww,u=this.wh,d=n-r+(s-0)-(Math.max(n,s)-Math.min(r,0)),l=o-i+(u-0)-(Math.max(o,u)-Math.min(i,0));return d<=0||l<=0?0:d*l},e.prototype.getMaxScore=function(e){var t=null;return e.forEach((function(e){e.dps.forEach((function(e){(null==t?void 0:t.st)?t.st<e.st&&(t=e):t=e}))})),t},e.prototype.setTag=function(e,t,r){void 0===r&&(r=window),0===this.initScrollTop&&t<2&&(this.initScrollTop=document.documentElement.scrollTop,this.initScrollLeft=document.documentElement.scrollLeft);var n=e instanceof Element,i=n?e.tagName:"shadowRoot",o=null==e?void 0:e.children;-1===c.indexOf(i)&&(null==o?void 0:o.length)&&(n&&null===e.getAttribute("fmp-c")&&"BODY"!==i&&e.setAttribute("fmp-c","".concat(t)),this.setChildTag(o,t,r))},e.prototype.setChildTag=function(e,t,r){void 0===r&&(r=window);for(var n=e.length-1;n>=0;n--){var i=e[n];if(null===i.getAttribute("fmp-c")){if(!this.elementInViewportAndVisible(i))continue;i.setAttribute("fmp-c","".concat(t))}this.setTag(i,t,r)}},e.prototype.elementInViewportAndVisible=function(e){var t=E(e,this.calcType),r=t.bottom,n=t.left,i=t.right,o=t.top,a=t.width,c=t.height;if("document"===this.calcType){var s=r-this.initScrollTop>0&&o-this.initScrollTop<this.wh,u=i-this.initScrollLeft>0&&n-this.initScrollLeft<this.ww;return s&&u}var d=I(e,a,c);return!!["PICTURE","IMG","VIDEO"].includes(e.tagName)||!!d&&(this.wh>o||this.ww>n)},e.prototype.getFMPTopList=function(e,t){e.push(t),e.sort((function(e,t){return t.time-e.time})),e.length>3&&e.pop()},e.prototype.mediaElementTime=function(e,t,r){var n=0,i="",o=function(e,t){var r=new Set;if("VIDEO"===e.tagName)r.add(e.src),r.add(null==e?void 0:e.poster);else{if("IMG"!==e.tagName)return O(e,t);"PICTURE"===(null==e?void 0:e.parentElement.tagName)&&(null==e?void 0:e.parentElement).querySelectorAll("source").forEach((function(e){var n=e.srcset;n&&n.split(",").forEach((function(e){var n=e.trim().split(" ")[0];r.add(C(n,t))}))})),e.src&&r.add(C(e.src,t))}return Array.from(r)}(e,r);return o.forEach((function(e){if(e){var r=t[e];r>n&&(n=r,i=e)}})),{time:n,domTag:i}},e}(),q=function(e){var t=e.win,r=void 0===t?window:t,n=e.beginTime,i=e.endTime,o=e.staticConfig||{},a=o.excludeStatics,c=o.includeStatics,s=o.withStaticsType,u=o.filter,d=r.performance.getEntries(),l=["navigation","script","link"].concat(s||[]),p=d.filter((function(e){return e.startTime>=n&&e.responseEnd<=i&&(u?u(e):!(!l.includes(e.initiatorType)&&!function(e){try{var t=new URL(e).pathname,r=t.substring(t.lastIndexOf("."));return[".html",".htm",".js",".css"].includes(r)}catch(e){return!1}}(e.name)||!v(e.name,a,c)))}));return y(n,p.map((function(e){return{name:(t=e.name,t.replace(/https:\/\/(.*?)[/#?]/,"")),start:e.startTime,end:e.responseEnd};var t})))},M="performance.init",j="performance.set",U=new(function(){function e(){var e=this;this.currentWindow=window,this.page="",this.trackView=function(t){e.page!==t.pageUrl&&(e.track("view",t),e.page=t.pageUrl)},this.trackPerf=function(t){t.tip||(t.tip="1280.0.0.0.29371"),e.track("performance",t)},this.trackRequest=function(t){e.track("performance_request",t)},this.trackDomDetail=function(t){e.track("performance_detail",t)},this.setPublicParams=function(t){"[object Object]"===Object.prototype.toString.call(t)&&e.track(j,t)}}return e.prototype.track=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=this.currentWindow.onetrack;if(r){if(e.length)if(e[0]===M)r.apply(void 0,a([],o(e),!1));else if(e[0]===j&&e[1])for(var n in e[1])e[1][n]&&r(j,n,e[1][n]);else r.apply(void 0,a(["performance.track"],o(e),!1))}else console.warn("未检测到onetrack方法，请确认是否引入sdk")},e.prototype.trackInit=function(e){this.track(M,e)},e.prototype.initOneTrack=function(e){var t,r=e.appId,n=void 0===r?"31000401679":r,i=e.contentWindow,o={username:e.username,userId:e.userId,system:e.system,group:e.group,env:e.env};this.currentWindow=null!=i?i:window,(null===(t=this.currentWindow)||void 0===t?void 0:t.onetrack)?n&&(this.trackInit(n),this.setPublicParams(o)):this.injectOneTrack()},e.prototype.injectOneTrack=function(){this.currentWindow.onetrack=function(){(window.onetrack.q=window.onetrack.q||[]).push(arguments)};var e=document.createElement("script");e.src="https://ssl-cdn.static.browser.mi-img.com/mistat-data/onetrack/onetrack.js",e.async=!0,this.currentWindow.document.head.append(e)},e}()),V=function(){function e(e,t){var r;this.win=window,this.isFirstLoad=!0,this.perfConfig={system:""},this.performanceData={},this.perfCallback=null,this.statusCollector=[],this.fmpFlag=!0,this.observer=null,this.callbackCount=0,this.entries={},this.startTime=performance.now(),this.firstInputTime=0,this.referer=[],this.sampleFlag=!1,this.req={},this.fmpHelper={},this.path="",this.containers=[],this.unloadedShadowRoot=[],this.isInitSdk=!1,this.whiteList=[],this.isWhitePage=function(){return!1},this.behaviourTimes=[],this.isNavigate=!1,this.behaviourType="click",this.interval=u,e&&(this.perfConfig=e),t&&(this.perfCallback=t),e.contentWindow&&(this.win=e.contentWindow||window,this.startTime=this.win.performance.now()),this.fmpHelper=new D(e.fmpOptions),this.req=new A(this.perfConfig),e.whiteList&&(this.whiteList=S(e.whiteList)?e.whiteList:[],this.isWhitePage=(r=e.whiteList,w(r,"Function")?e.whiteList:T)),e.autoInit&&!this.isInitSdk&&this.initTrack()}return e.prototype.performanceTrack=function(e){var t,r;void 0===e&&(e=!1);var n=this.performanceData,i=n.domLoad,o=n.isTracked,a=n.pageLoad,c=void 0===a?0:a,s=n.selector,u=(this.perfConfig||{}).manualTrack;if(!o){if(e||(null===(t=this.behaviourTimes)||void 0===t?void 0:t.length)||c&&(!s||s&&i)){var d=this.formatPerfData(e);null===(r=this.perfCallback)||void 0===r||r.call(this,d,this.statusCollector),!u&&this.trackData(d)}this.clearStatus()}},e.prototype.clearStatus=function(){this.behaviourTimes=[],this.req.resetReqList()},e.prototype.trackData=function(e){var t,i,c;if(this.isInitSdk){if(this.isFirstLoad=!1,this.req.resetTrace(),!this.isWhitePage(e.pageUrl,this.whiteList)){var s=e||{},u=s.traceId,d=s.uploadType,p=e||{};p.request;var m=p.requestList,f=void 0===m?[]:m,h=n(p,["request","requestList"]);if(!(null===(t=this.behaviourTimes)||void 0===t?void 0:t.length)||f.length){4!==d&&(this.performanceData.isTracked=!0,this.isNavigate&&(this.isNavigate=!1));var v=e.pageLoad,g=e.domLoad,y=void 0===g?0:g,_=e.useFmp,w=void 0===_?0:_,b=e.FMP,S=void 0===b?0:b,T=e.pageUrl,I=e.loadType,E=function(e){var t=e.FMP,r=e.domLoad;return e.useFmp&&t>0?t:r>0?r:e.pageLoad}({pageLoad:v,domLoad:y,useFmp:w,FMP:S});if(this.win.localStorage.getItem("_onetrack_debug")){var O=5===d?"".concat(I,"操作加载时间"):"页面最终加载时间";console.log("%c".concat(O,"：%c").concat(E,"ms"),"color: green; font-weight: bold; font-size: 16px;","color: red; font-weight: bold; font-size: 16px;")}U.trackPerf(r(r({},h),{loadTime:E})),f.forEach((function(e){U.trackRequest({traceId:u,requestUrl:e.name,requestStartTime:e.start,requestEndTime:e.end,requestDuration:e.duration,pageUrl:T,loadType:I})}));var C,N=l(this.behaviourTimes)||0,k=null===(c=null===(i=(C=this.statusCollector,(null==C?void 0:C.length)>20?C.slice(0,10).concat(C.slice(-10)):C).map((function(e){return{time:e.time,mutation:(t=e.mutation,n={},t.forEach((function(e){var t=e.target,i=e.removeNodes,c=e.addedNodes;["addedNodes","removeNodes"].forEach((function(e){var s,u,d="addedNodes"===e?c:i;d&&((null===(u=null==n?void 0:n[t])||void 0===u?void 0:u[e])?n[t][e]=a([],o(new Set(n[t][e].concat([d]))),!1):n[t]=r(r({},n[t]),((s={})[e]=[d],s)))}))})),n)};var t,n})))||void 0===i?void 0:i.filter((function(e){return e.time>N})))||void 0===c?void 0:c.map((function(e){return{time:e.time-N,mutation:e.mutation}}));(null==k?void 0:k.length)&&U.trackDomDetail({traceId:u,statusList:k,pageUrl:T,loadType:I,refererList:a([],o(this.referer),!1)})}else this.performanceData.isTracked=!0}}else console.warn("上报数据前请确认已执行初始化方法initTrack")},e.prototype.resetPerformanceTrack=function(e,t,r){var n;void 0===t&&(t=!0),t&&(this.isNavigate=!0,this.behaviourTimes=[],this.req.resetReqList(),this.req.requestObserver(!1)),this.sampleFlag||this.isWhitePage(this.path,this.whiteList)||(this.win.performance.clearResourceTimings(),this.performanceData={},this.startTime=r||this.win.performance.now(),this.firstInputTime=0,this.isFirstLoad=e,null===(n=this.observer)||void 0===n||n.forEach((function(e){return null==e?void 0:e.disconnect()})),this.statusCollector=[],this.fmpFlag=!0,this.observer=null,this.callbackCount=0,this.entries={},this.containers=[],this.initObserver())},e.prototype.initTrack=function(){var e=this;if(!this.isInitSdk){this.isInitSdk=!0;var t=this.perfConfig,r=t.tracesSampleRate,n=void 0===r?1:r,i=t.behaviourTrack,o=void 0!==i&&i;if(Math.random()>Number(n))this.sampleFlag=!0;else{U.initOneTrack(this.perfConfig),this.initObserver(),this.req.requestObserver(!0);var a=function(t){if(e.firstInputTime<=e.interval&&(e.firstInputTime=e.getPerfTime()),o){var r=t.type,n="input"===r,i=function(e){if("CANVAS"===e.target.nodeName)return e.target;var t=e.path||e.composedPath&&e.composedPath(),r=null;if(t)for(var n=0;n<t.length;n++){var i=t[n];if(i.onclick){r=i;break}}return r&&r!==document?r:null}(t);e.interval="CANVAS"===(null==i?void 0:i.tagName)?300:u,e.behaviourType=r;var a=n||!!i,c=performance.now();setTimeout((function(){e.isFirstLoad||e.isNavigate||!a||(e.behaviourTimes.push(c),e.performanceData.isTracked&&e.resetPerformanceTrack(!1,!1,c))}))}};this.win.addEventListener("click",a,!0),this.win.addEventListener("input",a,!0),function(e,t,r){e.addHistoryListener=R("historyChange",e),e.history.pushState=R("pushState",e),"hash"===t&&e.addEventListener("hashchange",p(r,300)),e.addHistoryListener("history",p(r,300))}(this.win,this.perfConfig.historyMethod,(function(){e.resetPerformanceTrack(!1,!0)}))}}},e.prototype.getPerfTime=function(e){return void 0===e&&(e=this.win.performance.now()),this.isFirstLoad?e:e-this.startTime},e.prototype.getObserverContainer=function(e){var t=this;void 0===e&&(e=this.perfConfig.container);var r=Array.isArray(e)?e:[null!=e?e:""],n=0,i=[];r.forEach((function(e){if(e){var r=t.win.document.querySelector(e);(null==r?void 0:r.shadowRoot)?t.containers.push(r.shadowRoot):r&&n<1?(n+=1,t.containers.push(r)):i.push(e)}})),this.containers.length||this.containers.push(this.win.document.body),this.unloadedShadowRoot=i},e.prototype.domLoadObserver=function(e,t,r,n){var i;if(void 0===n&&(n=this.getPerfTime()),r&&!this.performanceData.domLoad){var o=t||this.win.document;e.some((function(e){return e.addedNodes.length>0}))&&o.querySelector(r)&&n>this.interval&&(null===(i=this.observer)||void 0===i||i.forEach((function(e){return null==e?void 0:e.disconnect()})),this.performanceData.domLoad=n,this.performanceTrack())}},e.prototype.getSnapShot=function(e,t,r){void 0===e&&(e=[]),void 0===r&&(r=this.getPerfTime());var n=t||this.containers[0]||this.win.document.body,i=this.perfConfig,o=i.excludeNodes,a=void 0===o?[]:o,c=i.withoutFMP;this.isExcludeNode(a,e,t)||(this.statusCollector.push({time:r,now:this.win.performance.now(),mutation:e.map((function(e){var t,r;return{target:f(null==e?void 0:e.target),addedNodes:f(null===(t=null==e?void 0:e.addedNodes)||void 0===t?void 0:t[0]),removeNodes:f(null===(r=null==e?void 0:e.removedNodes)||void 0===r?void 0:r[0])}}))}),n&&!c&&this.fmpHelper.setTag(n,this.callbackCount,this.win),this.callbackCount+=1)},e.prototype.containerObserver=function(e,t,r){var n,i,o=this;void 0===r&&(r=3),e.length&&this.getObserverContainer(e);var a=this.containers;(null===(n=this.observer)||void 0===n?void 0:n.length)&&(a=this.containers.filter((function(e){return e instanceof ShadowRoot}))),a.forEach((function(e){var r,n=new o.win.MutationObserver((function(r){var n=o.getPerfTime();o.getSnapShot(r,e,n),o.domLoadObserver(r,e,t,n)}));n.observe(e,{childList:!0,subtree:!0}),null===(r=o.observer)||void 0===r||r.push(n)})),r>0&&(null===(i=this.unloadedShadowRoot)||void 0===i?void 0:i.length)&&!this.checkNeedCancel()&&this.win.setTimeout((function(){o.containerObserver(o.unloadedShadowRoot,t,r-1)}),500)},e.prototype.isExcludeNode=function(e,t,r){var n=this,i=t.length,o=!1;try{if("function"==typeof e)o=e(t);else if(e.length&&i){var a=function(e){if(!e)return"";var t=e.target,r=e.addedNodes,n=e.removedNodes,i=r[0]||n[0]||t;return f(i)}(i?t[i-1]:null);o=(o=1===i&&e.includes(a))||t.every((function(t){return e.some((function(e){var i,o=r instanceof ShadowRoot?r:n.win.document;return null===(i=Array.from(o.querySelectorAll(e)))||void 0===i?void 0:i.some((function(e){var r,n;return e.querySelector(f(t.target))||(null===(r=Array.from(t.addedNodes))||void 0===r?void 0:r.every((function(t){return e.contains(t)})))&&(null===(n=Array.from(t.removedNodes))||void 0===n?void 0:n.every((function(t){return e.contains(t)})))}))}))}))}}catch(e){console.warn("excludeNodes error",e)}return o},e.prototype.initObserver=function(){var e,t=this;if(this.behaviourTimes.length||(this.path=this.getPathName().path,this.referer.push(this.path),U.trackView({pageUrl:this.path,version:L})),!this.isWhitePage(this.path,this.whiteList)){this.getObserverContainer(this.perfConfig.container),this.getSnapShot(),this.observer=[];var r=(null===(e=this.behaviourTimes)||void 0===e?void 0:e.length)?null:function(e,t){var r;if(!t)return"";var n=t[e];return n||(n=t[null!==(r=Object.keys(t).find((function(t){return!!t&&new RegExp(t).test(e)})))&&void 0!==r?r:""]),n}(this.path,this.perfConfig.domObserver);r&&(this.performanceData.selector=r),this.containerObserver(this.unloadedShadowRoot,r),"complete"===this.win.document.readyState||"document"===this.fmpHelper.calcType?this.calculateFinalScore():this.win.addEventListener("load",(function(){return t.calculateFinalScore()}),!1)}},e.prototype.calculateFinalScore=function(){var e,t=this;this.fmpFlag&&(this.checkNeedCancel()?(null===(e=this.observer)||void 0===e||e.forEach((function(e){return null==e?void 0:e.disconnect()})),this.win.performance.getEntries().forEach((function(e){t.entries[e.name]=t.getPerfTime(e.responseEnd)})),this.calcFMP(),this.performanceTrack()):this.win.setTimeout((function(){t.calculateFinalScore()}),500))},e.prototype.calcFMP=function(e){var t,r=this;void 0===e&&(e=this.containers);var n=this.perfConfig||{},i=n.fmpOptions,o=(void 0===i?{}:i).fmpFilter,a=void 0===o?null:o,c=n.withoutFMP,s=this.performanceData,u=s.pageLoad,d=void 0===u?0:u,l=s.fmp;if(this.fmpFlag=!1,!(c||d<2e3||l)){var p=e.map((function(e){return r.fmpHelper.getTreeScore(e,r.win)})),m=this.fmpHelper.getMaxScore(p);if(m){var f=("function"==typeof a?a:this.fmpHelper.filterResult)(m.els);this.performanceData.fmp=this.getFmpTime(f,(null===(t=this.behaviourTimes)||void 0===t?void 0:t.length)>0)}}},e.prototype.getFmpTime=function(e,t){var r,n,o,a;if(t)return 0;var c=0,s=[];try{for(var u=i(e),d=u.next();!d.done;d=u.next()){var l=d.value,p=parseInt(null!==(o=l.$node.getAttribute("fmp-c"))&&void 0!==o?o:""),m="".concat(p,"-").concat(f(l.$node)),h=null===(a=this.statusCollector[p])||void 0===a?void 0:a.time,v=this.fmpHelper.mediaElementTime(l.$node,this.entries,this.win),g=v.time,y=v.domTag;g>h&&y&&(h=g,m=y),"number"!=typeof h&&(h=0),c=Math.max(c,h),this.fmpHelper.getFMPTopList(s,{time:h,domTag:m})}}catch(e){r={error:e}}finally{try{d&&!d.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}return this.performanceData.fmpSlowComp=s,c},e.prototype.checkNeedCancel=function(){var e,t,r,n,i=this.getPerfTime(),o=this.statusCollector.length>0?null===(e=this.statusCollector[this.statusCollector.length-1])||void 0===e?void 0:e.time:0,a=null!==(t=this.perfConfig.maxWait)&&void 0!==t?t:15e3,c=null!==(r=this.perfConfig.domWait)&&void 0!==r?r:2e3,s=!(null===(n=this.behaviourTimes)||void 0===n?void 0:n.length)&&i>a||this.req.withoutReq()&&i-o>c;return this.performanceData.pageLoadBak=o,s&&(this.performanceData.pageLoad=o),s},e.prototype.getPathName=function(){var e=this.win.location||{},t=e.pathname,r=e.hash,n=e.search;return{path:t+r+(this.perfConfig.distinctSearch?n:""),pathname:t,hash:r,search:n}},e.prototype.formatPerfData=function(e){var t,n,i=this.win,o=this.performanceData,a=o.pageLoad,c=void 0===a?0:a,s=o.domLoad,d=void 0===s?0:s,p=o.pageLoadBak,m=void 0===p?0:p,f=o.fmp,h=void 0===f?0:f,v=o.fmpSlowComp,y=this.perfConfig,_=y.tip,w=y.useFmp,b=void 0===w?0:w,S=y.tracesSampleRate,T=void 0===S?1:S,I=y.module,E=void 0===I?"":I,O=y.system,C=y.traceConfig,N=y.staticConfig,k=l(this.behaviourTimes),A=void 0!==k,P=d>0?d:c,x=(this.isFirstLoad?0:this.startTime)+(A?k-u:0),R=this.startTime+P,D=(null===(t=this.req)||void 0===t?void 0:t.getHttpTime({win:i,beginTime:x,endTime:R}))||{},M=D.start,j=D.end,U=D.duration,V=D.entryList,F=D.maxDurationEntry,W=g(j),B=g(M),G=e&&m>500&&!c?m:c,H={};if(A)G=Math.max(G-k,W);else{var J=q({win:i,beginTime:x,endTime:R,staticConfig:N})||{},z=J.entryList,K=J.start,$=J.end,Z=J.duration;H={resourceEntries:JSON.stringify(z),resourceStartTime:g(K),resourceEndTime:g($),resourceDuration:g(Z)}}var X=function(e){var t=e.hasReq,r=e.behaviour,n=e.isFirstLoad,i=0;return e.pageLoad-e.requestEndTime>3e3&&!n?i=6:r&&!t?i=5:e.rightNow?i=4:r&&t?i=3:t?i=2:(n||e.isNavigate)&&e.hasInput&&(i=1),i}({hasReq:!this.req.withoutReq(),rightNow:e,pageLoad:G,requestEndTime:W,behaviour:A,isNavigate:this.isNavigate,isFirstLoad:this.isFirstLoad,hasInput:this.firstInputTime>this.interval}),Y=e?(null===(n=this.referer.slice(-1))||void 0===n?void 0:n[0])||"":this.path,Q={tip:_,version:L,uploadType:X,pageUrl:Y,tracesSampleRate:T,system:O,module:E},ee=i.navigator,te=ee.hardwareConcurrency,re=ee.platform,ne=ee.connection,ie=void 0===ne?{}:ne,oe=ie.effectiveType,ae=void 0===oe?"-":oe,ce=ie.downlink,se=void 0===ce?"-":ce,ue=ie.rtt,de=void 0===ue?"":ue,le={plat:re,network:"type:".concat(ae,"/downlink:").concat(se,"/rtt:").concat(de),hardware:te},pe=i.performance.timeOrigin,me="navigate";return this.isFirstLoad?me="reload":(pe+=this.startTime,A&&(pe+=k,me=this.behaviourType)),r(r(r(r({},Q),le),H),{pageLoad:g(G),domLoad:g(d),FMP:Math.floor(h),timeOrigin:this.isFirstLoad?pe:pe+this.startTime,title:i.document.title,requestList:V,requestStartTime:B,requestEndTime:W,requestDuration:g(U),maxRequestDuration:g(null==F?void 0:F.duration),maxRequestUrl:(null==F?void 0:F.name)||"",loadType:me,traceId:this.req.traceId,useFmp:b?1:0,extra:(null==C?void 0:C.enable)?{traceCount:this.req.traceCount}:{},fmpSlowComp:v})},e.prototype.getFmpSlowComp=function(){return this.performanceData.fmpSlowComp},e.prototype.getComposeData=function(e,t,i){return void 0===i&&(i=!1),function(e,t,i){var o=t.timeOrigin,a=void 0===o?0:o,c=t.request,s=t.pageUrl,u=e.timeOrigin,l=void 0===u?0:u,p=e.pageUrl,m=e.loadType,f=e.system,h=n(e,["timeOrigin","pageUrl","loadType","system"]);if(0===l)return t;var v=Math.round(a-l),g={};(i||p===s)&&(g=["pageLoad","FMP","domLoad","requestStartTime","requestEndTime"].reduce((function(e,n){var i,o=d(t[n],v);return r(r({},e),((i={})[n]=o,i))}),{}));var y={};return Object.keys(c).forEach((function(e){var t=c[e]||{},r=t.requestStartTime,n=t.requestEndTime,i=t.requestDuration;y[e]={requestDuration:i,requestStartTime:d(r,v),requestEndTime:d(n,v)}})),r(r(r(r({},h),t),g),{pageUrl:p,timeOrigin:l,loadType:m,system:f,request:y})}(e,t,i)},e.prototype.destroy=function(){var e;for(var t in null===(e=this.observer)||void 0===e||e.forEach((function(e){return null==e?void 0:e.disconnect()})),this)delete this[t]},e.prototype.setPublicParams=function(e){U.setPublicParams(e)},e.prototype.pageFinish=function(){var e,t;if(!this.performanceData.isTracked){var n=(this.perfConfig||{}).manualTrack,i=this.getPerfTime();this.performanceData.pageLoad=i,this.performanceData.domLoad=i,this.calcFMP();var o=r(r({},this.formatPerfData(!1)),{uploadType:0});null===(e=this.perfCallback)||void 0===e||e.call(this,o,this.statusCollector),!n&&this.trackData(o),null===(t=this.observer)||void 0===t||t.forEach((function(e){return null==e?void 0:e.disconnect()})),this.clearStatus()}},e}();t.RI=V},682:(e,t,r)=>{var n,i;!function(o){if(void 0===(i="function"==typeof(n=o)?n.call(t,r,t,e):n)||(e.exports=i),!0,e.exports=o(),!!0){var a=window.Cookies,c=window.Cookies=o();c.noConflict=function(){return window.Cookies=a,c}}}((function(){function e(){for(var e=0,t={};e<arguments.length;e++){var r=arguments[e];for(var n in r)t[n]=r[n]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function r(n){function i(){}function o(t,r,o){if("undefined"!=typeof document){"number"==typeof(o=e({path:"/"},i.defaults,o)).expires&&(o.expires=new Date(1*new Date+864e5*o.expires)),o.expires=o.expires?o.expires.toUTCString():"";try{var a=JSON.stringify(r);/^[\{\[]/.test(a)&&(r=a)}catch(u){}r=n.write?n.write(r,t):encodeURIComponent(String(r)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var c="";for(var s in o)o[s]&&(c+="; "+s,!0!==o[s]&&(c+="="+o[s].split(";")[0]));return document.cookie=t+"="+r+c}}function a(e,r){if("undefined"!=typeof document){for(var i={},o=document.cookie?document.cookie.split("; "):[],a=0;a<o.length;a++){var c=o[a].split("="),s=c.slice(1).join("=");r||'"'!==s.charAt(0)||(s=s.slice(1,-1));try{var u=t(c[0]);if(s=(n.read||n)(s,u)||t(s),r)try{s=JSON.parse(s)}catch(d){}if(i[u]=s,e===u)break}catch(d){}}return e?i[e]:i}}return i.set=o,i.get=function(e){return a(e,!1)},i.getJSON=function(e){return a(e,!0)},i.remove=function(t,r){o(t,"",e(r,{expires:-1}))},i.defaults={},i.withConverter=r,i}((function(){}))}))}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,r),o.exports}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var n={};return(()=>{"use strict";r.d(n,{default:()=>ir});var e=r(682),t=r(126),i=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(c){i={error:c}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},o={in:[108,121,124,124],id:[109,126,128,128],de:[710,711,592,592],nl:[579,580,591,591],es:[138,139,605,605],fr:[571,572,573,573],it:[524,525,589,589],uk:[577,578,590,590],ru:[132,575,587,587],hk:[103,129,604,604],tw:[104,120,127,127],default:[0,0,0,0]},a={default:{APP_ID:"2882303761517399893",PRO_ID:"16"},pocoDefault:{APP_ID:"31000000334",PRO_ID:"16"}},c={cz:"high",ar:"high",es:"high",fr:"high",it:"high",uk:"high",de:"high",pe:"high",pl:"high",se:"high",global:"high",tr:"high",nl:"high",gr:"high",at:"high",hu:"high",kz:"high","kz-ru":"high","kz-kk":"high",rs:"high",ro:"high",bg:"high",co:"high",sg:"high",kr:"high",au:"high",be:"high","be-fr":"high","be-nl":"high",vn:"middle",cl:"high"},s={in:!0,default:!0};function u(e){var t=i(o[e]||o.default,4);return{pc:t[0],m:t[1],app:t[2],ios:t[3]}}function d(e){return a[e]||(document.domain.includes("po.co")?a.pocoDefault:a.default)}var l={ae:{currencyCode:"AED"},au:{currencyCode:"AUD"},bd:{currencyCode:"BDT"},be:{currencyCode:"EUR"},br:{currencyCode:"BRL"},ca:{currencyCode:"CAD"},cl:{currencyCode:"CLP"},cn:{currencyCode:"CNY"},co:{currencyCode:"COP"},cz:{currencyCode:"CZK"},de:{currencyCode:"EUR"},dk:{currencyCode:"DKK"},eg:{currencyCode:"EGP"},es:{currencyCode:"EUR"},fr:{currencyCode:"EUR"},gcc:{currencyCode:"AED"},global:{currencyCode:"USD"},gr:{currencyCode:"GRD"},hk:{currencyCode:"HKD"},hu:{currencyCode:"HUF"},id:{currencyCode:"IDR"},ie:{currencyCode:"EUR"},il:{currencyCode:"ILS"},ir:{currencyCode:"IRR"},in:{currencyCode:"INR"},it:{currencyCode:"EUR"},jp:{currencyCode:"JPY"},kr:{currencyCode:"KRW"},la:{currencyCode:"LAK"},lk:{currencyCode:"LKR"},lu:{currencyCode:"EUR"},ma:{currencyCode:"MAD"},mm:{currencyCode:"MMK"},mo:{currencyCode:"MOP"},mx:{currencyCode:"MXN"},my:{currencyCode:"MYR"},ng:{currencyCode:"NGN"},nl:{currencyCode:"EUR"},np:{currencyCode:"NPR"},nz:{currencyCode:"NZD"},ph:{currencyCode:"PHP"},pk:{currencyCode:"PKR"},pl:{currencyCode:"PLN"},pt:{currencyCode:"EUR"},ro:{currencyCode:"RON"},ru:{currencyCode:"RUB"},sa:{currencyCode:"SAR"},se:{currencyCode:"SEK"},sg:{currencyCode:"SGD"},th:{currencyCode:"THB"},tr:{currencyCode:"TRY"},tw:{currencyCode:"TWD"},ua:{currencyCode:"UAH"},uk:{currencyCode:"GBP"},us:{currencyCode:"USD"},vn:{currencyCode:"VND"},za:{currencyCode:"ZAR"}};function p(e){return Object.assign({currencyCode:"USD"},l[e]||{})}function m(e){return s[e]||s.default}var f=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{s(n.next(e))}catch(t){o(t)}}function c(e){try{s(n.throw(e))}catch(t){o(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,c)}s((n=n.apply(e,t||[])).next())}))},h=function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(c){return function(s){return function(c){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,n=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){a.label=c[1];break}if(6===c[0]&&a.label<i[1]){a.label=i[1],i=c;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(c);break}i[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(s){c=[6,s],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}},v=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(c){i={error:c}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},g=function(e,t,r){if(r||2===arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))},y=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},_=["guserid","instance_id","muserid","site_country","tz","app_platform","ot_ua","last_source","utm_channel","utm_content","utm_term","utm_type","abtest_group","abtest_group1","abtest_group2"];function w(){return e.get("mstuid")||""}function b(t){var r="1"===e.get("_ot_use_type"),n=oe();return!r&&w()?n=w():e.get("_ot_instance_id")?n=e.get("_ot_instance_id")||n:e.set("_ot_instance_id",n,q(t,{expires:new Date(Date.now()+34128e6)})),n}function S(e,t){if(e instanceof Object){var r=document.querySelector("html"),n=document.querySelector("body"),i="";if(t)try{var o=t.closest("[data-ot-module]");i=!!o&&o.getAttribute("data-ot-module")||""}catch(s){}var a=[e.a||!!r&&r.getAttribute("data-ot-project")||d("default").PRO_ID,e.b||!!n&&n.getAttribute("data-ot-page")||0,e.c||i||0,e.d||0,e.e||0,Math.floor(Math.random()*Math.pow(10,8))];return I(a)?a.join("."):""}var c=(e||"").split(".");return I(c)?g(g([],v(c.slice(0,5)),!1),[Math.floor(Math.random()*Math.pow(10,8))],!1).join("."):""}function T(e){var t,r=e.split(".");if(I(r)){var n="",i="",o=v(r,5),a=o[1],c=o[2],s=o[3],u=o[4],d=c.split("|");return d.length>0&&(n=(t=v(d,2))[0],i=t[1]),{tipB:a,tipC:n,tipC1:i||"",tipD:s,tipE:u}}return{tipB:"",tipC:"",tipC1:"",tipD:"",tipE:""}}function I(e){var t=!0;return e.length<5&&(t=!1),e.slice(0,2).some((function(e){return 0===Number(e||0)}))&&(t=!1),window.__CURRENT_PAGE_URL__===window.location.href&&(t=!1),Z()&&!t&&console.warn("The tip code [".concat(e.join("."),"] is invalid!")),!!t}function E(t){var r=C(),n=t.split("."),i=v(n,5),o=i[0],a=i[1],c=i[2],s=i[3],u=i[4];r&&e.set("_ot_ref_tip",n.length>5?"".concat(o,".").concat(a,".").concat(c,".").concat(s,".").concat(u):"",q(r))}function O(){return e.get("_ot_ref_tip")||""}function C(){var e=document.querySelector("html");return e&&e.getAttribute("data-ot-local")||(window.location.pathname||"/").split("/")[1]||""}function N(){var e=v(C().split("-"),2),t=e[0],r=e[1];if(t&&r)return"".concat(r,"-").concat(t.toUpperCase())}function k(){var t=document.querySelector("html"),r=t&&t.getAttribute("data-ot-platform"),n=U(),i=n.isOtherApp,o=n.isMihomeApp,a=n.isMicommunityApp;return i?o?"mihome_sdk":a?"micommunity_sdk":"others":"1"===e.get("ISAPP")?"android":"1"===e.get("ISIOS")?"ios":r||"m"}function A(){return!!document.body&&document.body.getAttribute("data-ot-pageType")||void 0}function P(t){!function(t){var r=Number(e.get("_ot_last_time")||0);r&&Date.now()-r>18e5&&e.set("_ot_update_flag","true",q(t));!function(t){e.set("_ot_last_time",String(Date.now()),q(t))}(t)}(t);var r=document.referrer||"",n=([q(t).domain,".xiaomi.com",".xiaomi.net"].some((function(e){return!!~r.indexOf(e)}))?e.get("_ot_last_source"):r)||"",i="true"===e.get("_ot_update_flag")?"":n;return e.set("_ot_last_source",i||"",q(t,{expires:new Date(Date.now()+18e5)})),i}function x(t){var r=document.location.href||"",n=document.referrer||"",i=e.get("_ot_prev_uri_path")||"";e.set("_ot_referrer_path",n||"",q(t)),e.set("_ot_prev_uri_path",i!==n?n:i||"",q(t)),e.set("_ot_curr_uri_path",r,q(t))}function R(t){var r=document.location.href||"",n=document.referrer||"",i=e.get("_ot_referrer_path")||"",o=e.get("_ot_curr_uri_path")||"";return r!==o&&(e.set("_ot_prev_uri_path",o,q(t)),e.set("_ot_curr_uri_path",r,q(t))),n===i&&n?e.get("_ot_prev_uri_path")||"":(e.set("_ot_prev_uri_path",n,q(t)),n||"")}function L(t,r,n){var i=n||e.get("_ot_".concat(r))||"",o="true"===e.get("_ot_update_flag")?"":i;return e.set("_ot_".concat(r),o,q(t,{expires:new Date(Date.now()+18e5)})),o}function D(t,r,n){return(r instanceof Array?r:[r]).forEach((function(r){return e.remove(r,q(t,n))}))}function q(e,t){return Object.assign({sameSite:"strict",path:"/"+e,domain:".".concat((window.location.hostname||"").split(".").slice("id"===e?-3:-2).join("."))},t||{})}function M(t){var r=e.get("_ot_session_id")||String(Date.now());return e.set("_ot_session_id",r,q(t,{expires:new Date(Date.now()+18e5)})),r}function j(e){return"string"!=typeof e?void 0:e.replace(/^javascript:void\(0\)(;)?/g,"").replace(/^(http(s?):)?\/\//i,"".concat(window.location.protocol,"//"))}function U(){var t="1"===e.get("ISAPP")||"1"===e.get("ISIOS"),r=!!~["community_sdk","mihome_sdk"].indexOf(e.get("request_from")||""),n=!!~["mihome_sdk"].indexOf(e.get("request_from")||""),i=!!~["community_sdk"].indexOf(e.get("request_from")||""),o=t&&!r&&Number(e.get("APPVERSION"))<31500,a=t&&!r&&Number(e.get("IOSVERSION"))<31e3,c=t&&!r&&Number(e.get("APPVERSION"))<=40200,s=t&&!r&&Number(e.get("IOSVERSION"))<=40100,u=t&&!r&&Number(e.get("APPVERSION"))>=1e5;return{isInsideApp:t,isOldAPP:o,isOldIOS:a,isOtherApp:t&&r,isUseMiCommand:t&&(Number(e.get("APPVERSION"))>=31800||Number(e.get("IOSVERSION"))>=31300),isGAOldApp:c,isGAOldIOS:s,isPocoApp:u,isMihomeApp:n,isMicommunityApp:i}}function V(t,r){try{var n=JSON.stringify({eventType:t,params:r}),i="xiaomi://MiEventTrackCommand?action=logGA&params="+encodeURIComponent(n);"1"===e.get("ISIOS")?Number(e.get("IOSVERSION"))>=40503?window.webkit.messageHandlers.trackAction.postMessage({url:i}):window.location.assign(i):"1"===e.get("ISAPP")&&prompt(i)}catch(o){console.warn("GA4: An error occurred in app!")}}function F(e){var t=Object.assign({},e);for(var r in t)if(void 0===t[r])delete t[r];else if(Array.isArray(t[r]))for(var n=0;n<t[r].length;n++)t[r][n]=F(t[r][n]);else"object"==typeof t[r]&&(t[r]=F(t[r]));return t}function W(t,r){var n,i,o;t=function(e){var t=Object.assign({},e);for(var r in t)if(Array.isArray(t[r]))for(var n=0;n<t[r].length;n++)t[r][n]=F(t[r][n]);else"object"==typeof t[r]?t[r]=F(t[r]):"string"==typeof t[r]&&(_.includes(r)?t[r]=t[r].substr(0,36):t[r]=t[r].substr(0,100));return t}(t);var a=U(),c=a.isInsideApp,s=a.isGAOldApp,u=a.isGAOldIOS,d=a.isPocoApp,l=!a.isOtherApp||"1"===e.get("ISIOS")||"1"===e.get("ISAPP")&&Number(e.get("sdk_version"))>=40922,p=c&&!s&&!u&&!d&&l;if(!function(t){var r="1"===e.get("ISAPP"),n="1"===e.get("ISIOS"),i={de:r&&Number(e.get("APPVERSION"))<40403||n&&Number(e.get("IOSVERSION"))<40400,es:r&&Number(e.get("APPVERSION"))<40300||n&&Number(e.get("IOSVERSION"))<40400,fr:r&&Number(e.get("APPVERSION"))<40300||n&&Number(e.get("IOSVERSION"))<40400,id:r&&Number(e.get("APPVERSION"))<40700||n&&Number(e.get("IOSVERSION"))<40800,in:r&&Number(e.get("APPVERSION"))<40600||n&&Number(e.get("IOSVERSION"))<40700,it:r&&Number(e.get("APPVERSION"))<40300||n&&Number(e.get("IOSVERSION"))<40400,jp:r&&Number(e.get("APPVERSION"))<40400||n&&Number(e.get("IOSVERSION"))<40500,mx:r&&Number(e.get("APPVERSION"))<40800||n&&Number(e.get("IOSVERSION"))<40900,nl:r&&Number(e.get("APPVERSION"))<40400||n&&Number(e.get("IOSVERSION"))<40500,pl:r&&Number(e.get("APPVERSION"))<40500||n&&Number(e.get("IOSVERSION"))<40600,ru:r&&Number(e.get("APPVERSION"))<40400||n&&Number(e.get("IOSVERSION"))<40500,tr:r&&Number(e.get("APPVERSION"))<40400||n&&Number(e.get("IOSVERSION"))<40500,uk:r&&Number(e.get("APPVERSION"))<40400||n&&Number(e.get("IOSVERSION"))<40500,default:!1};return i[t]||i.default}(C()))if(p){var m=Object.assign({},t);delete m.event;try{var f=r?m.ecommerce:m;f.page_location=window.location.href.replace("/app/","/").replace("/ios/","/").substring(0,100),f.page_referrer=null===(n=f.page_referrer)||void 0===n?void 0:n.replace("/app/","/").replace("/ios/","/").substring(0,100),"page_view"===t.event?(V("screen_view",JSON.stringify({screen_name:f.page_type})),setTimeout((function(){V(t.event,JSON.stringify(F(f)))}),800)):V(t.event,JSON.stringify(F(f)))}catch(h){console.warn("GA4: An error occurred in app!")}}else try{r&&(null===(i=window.dataLayer)||void 0===i||i.push({ecommerce:null})),null===(o=window.dataLayer)||void 0===o||o.push(t)}catch(h){console.warn("GA4: An error occurred in web!")}}function B(){var t,r,n=(t=C(),(r={in:!0,default:!1})[t]||r.default),i="1"===e.get("ISAPP")&&Number(e.get("APPVERSION"))>40901||"1"===e.get("ISIOS")&&Number(e.get("IOSVERSION"))>40900;return U().isInsideApp?n&&i:n}function G(t,r){if(!B()&&r.tip&&te()){var n=U(),i=n.isInsideApp,o=n.isOldAPP,a=n.isOldIOS;if(i&&!o&&!a){var c=r.tip.split("."),s={b:c[1],c:c[2],d:c[3],e:c[4],location:window.location.href||"",page:re(),title:window.document.title||"",page_version:X()};Object.keys(r).forEach((function(e){"tip"!==e&&(s[e.replace(/([A-Z])/g,"_$1").toLowerCase()]=r[e])}));try{!function(t,r){if(U().isUseMiCommand&&"1"===e.get("ISIOS")){var n=JSON.stringify({eventType:t,params:r}),i="xiaomi://MiEventTrackCommand?action=track&params="+encodeURIComponent(n);Number(e.get("IOSVERSION"))>=40503?window.webkit.messageHandlers.trackAction.postMessage({url:i}):window.location.assign(i)}else window.WE&&window.WE.trackEvent&&"function"==typeof window.WE.trackEvent&&window.WE.trackEvent(t,r)}(t,JSON.stringify($(s)))}catch(u){console.warn("OneTrack: An error occurred in app!")}}else try{"function"==typeof window.onetrack&&window.onetrack("track",t,$(r))}catch(u){console.warn("OneTrack: An error occurred in web!")}}}function H(e){return Q({utm_type:"mi_type",utm_channel:"mi_channel",utm_campaign:"utm_campaign",utm_source:"mi_source",utm_medium:"mi_medium",utm_term:"mi_term",utm_content:"mi_content"}[e])||Q(e)||""}function J(e,t){var r=Object.assign({},e);return t&&"object"==typeof t&&Object.keys(t).forEach((function(e){r[e.replace(/([A-Z])/g,"_$1").toLowerCase()]=z(t[e],"")})),r}function z(e,t){return void 0===e?null:void 0!==t?e||t:e}function K(e,t){return void 0===e?t||void 0:void 0!==t?"".concat(e)?e:e||t||void 0:e}function $(e){var t=Object.assign({},e);return Object.keys(t).forEach((function(e){~[null,void 0].indexOf(t[e])&&delete t[e]})),t}function Z(){var e=document.querySelector("html"),t=e&&e.getAttribute("data-ot-test");return(document.domain.includes("test")||document.domain.includes("dev"))&&"true"===t}function X(){var e="";try{e="".concat(process.env.VERSION)}catch(t){}return e||"1.0.0"}function Y(){var e="temp";try{return sessionStorage.setItem(e,e),sessionStorage.removeItem(e),!0}catch(t){return!1}}function Q(e,t){var r=t||window.location.search||(window.location.hash||"").replace(/.+\?/g,"?").replace(/#.+/g,"");if(!r)return"";var n=r.slice(1).split("&").map((function(e){return e.split("=")}));return(v(n.filter((function(t){var r=v(t,2),n=r[0];r[1];return n===e})).map((function(e){var t=v(e,2);t[0];return t[1]})),1)[0]||"").replace(/[ +]/g,"%20").replace(/(%[a-f0-9]{2})+/gi,(function(e){return decodeURIComponent(e)}))}var ee=function(){return{instanceId:("1"===e.get("_ot_use_type")?e.get("_ot_instance_id")||"":w())||"",viewTip:e.get("_ot_view_tip")||"",refTip:e.get("_ot_ref_tip")||"",refB:e.get("_ot_ref_b")||"",sessionId:e.get("_ot_session_id")||"",lastSource:e.get("_ot_last_source")||"",utmType:e.get("_ot_utm_type")||"",utmChannel:e.get("_ot_utm_channel")||"",utmCampaign:e.get("_ot_utm_campaign")||"",utmSource:e.get("_ot_utm_source")||"",utmMedium:e.get("_ot_utm_medium")||"",utmTerm:e.get("_ot_utm_term")||"",utmContent:e.get("_ot_utm_content")||""}};function te(){var t=U().isInsideApp,r=C(),n=-1!==window.location.hostname.indexOf("po.co"),i=function(e){return"high"!==c[e]?"0,1,2,3:":"0:"}(r);return!!(t||n?"0,1,2,3:":e.get("notice_gdpr_prefs")||i).match(/3/)}function re(){return(window.location.pathname||"/").replace(/^\/([a-z|-]+)/,"").replace(/\/(index.html)?$/,"")||"/index"}function ne(e,t,r,n){return f(this,void 0,void 0,(function(){var i,o,a,c,s,u,d,l,p,m,f;return h(this,(function(h){switch(h.label){case 0:switch(i={},o=K(n.ecommerce.pageType||!!document.body&&document.body.getAttribute("data-ot-pageType")||void 0,""),a=K(t.itemListName,"")?"".concat(o,".").concat(K(t.itemListName,"")):void 0,c=K(t.itemListId,"")?"".concat(o,".").concat(K(t.itemListId,"")):"".concat(o,".").concat(r.tipC).concat(r.tipC1?"|".concat(r.tipC1):""),e){case"view_item_list":return[3,1];case"select_item":return[3,2];case"view_item":return[3,3];case"view_cart":return[3,6];case"add_to_cart":return[3,9];case"remove_from_cart":return[3,12];case"begin_checkout":return[3,15];case"add_shipping_info":return[3,18];case"add_payment_info":return[3,21];case"select_promotion":return[3,24];case"view_promotion":return[3,25]}return[3,26];case 1:case 2:return i={item_list_name:K(a,""),item_list_id:K(c,""),index:Number(t.index||0)},[3,27];case 3:return s={},[4,se("_ot_item_list_name")];case 4:return s.item_list_name=h.sent(),[4,se("_ot_item_list_id")];case 5:return s.item_list_id=h.sent(),s.index=Number(t.index||0),i=s,[3,27];case 6:return u={},[4,se("_ot_item_list_name")];case 7:return u.item_list_name=h.sent(),[4,se("_ot_item_list_id")];case 8:return u.item_list_id=h.sent(),u.index=Number(t.index||0),i=u,[3,27];case 9:return d={},[4,se("_ot_item_list_name")];case 10:return d.item_list_name=h.sent(),[4,se("_ot_item_list_id")];case 11:return d.item_list_id=h.sent(),d.index=Number(t.index||0),i=d,[3,27];case 12:return l={},[4,se("_ot_item_list_name")];case 13:return l.item_list_name=h.sent(),[4,se("_ot_item_list_id")];case 14:return l.item_list_id=h.sent(),l.index=Number(t.index||0),i=l,[3,27];case 15:return p={},[4,se("_ot_item_list_name")];case 16:return p.item_list_name=h.sent(),[4,se("_ot_item_list_id")];case 17:return p.item_list_id=h.sent(),p.index=Number(t.index||0),i=p,[3,27];case 18:return m={},[4,se("_ot_item_list_name")];case 19:return m.item_list_name=h.sent(),[4,se("_ot_item_list_id")];case 20:return m.item_list_id=h.sent(),m.index=Number(t.index||0),i=m,[3,27];case 21:return f={},[4,se("_ot_item_list_name")];case 22:return f.item_list_name=h.sent(),[4,se("_ot_item_list_id")];case 23:return f.item_list_id=h.sent(),f.index=Number(t.index||0),i=f,[3,27];case 24:case 25:return i={promotion_id:K(t.promotionId,""),promotion_name:K(t.promotionName,""),creative_name:K(t.creativeName,""),creative_slot:K(t.creativeSlot,""),index:Number(t.index||0)},[3,27];case 26:return[3,27];case 27:return[2,i]}}))}))}function ie(e,t){for(var r=e.charCodeAt(0),n=t.charCodeAt(0),i="",o=r;o<=n;o++)i+=String.fromCharCode(o);return i}function oe(){return function(e,t){for(var r="",n=0;n<t;n++)r+=e[Math.floor(Math.random()*e.length)];return r}(ie("0","9")+ie("a","z"),32)}function ae(e){var t,r,n,i,o,a;try{for(var c=y(e),s=c.next();!s.done;s=c.next()){var u=s.value;if(u){var d=String(u).toLowerCase();d.startsWith("spu")?a=u:d.length>=3&&d.length<=6?o=u:d.startsWith("3")&&d.length<11?n=u:d.startsWith("4")&&d.length<26&&(i=u)}}}catch(l){t={error:l}}finally{try{s&&!s.done&&(r=c.return)&&r.call(c)}finally{if(t)throw t.error}}return{commodityId:n,itemId:i,productId:o,spuId:a}}function ce(t,r){var n=U(),i=n.isInsideApp,o=n.isGAOldApp,a=n.isGAOldIOS,c=n.isPocoApp;if(!(i&&!o&&!a&&!c)||Number(e.get("APPVERSION"))<=40402||Number(e.get("IOSVERSION"))<=40504)e.set(t,r,q(C(),{expires:365}));else try{"1"===e.get("ISIOS")?window.webkit.messageHandlers.setStringPref.postMessage({key:t.split("_ot_")[1],value:r}):window.WE&&window.WE.trackEvent&&"function"==typeof window.WE.trackEvent&&window.WE.setStringPref(t.split("_ot_")[1],r)}catch(s){console.log("set module name-id error")}}function se(t){var r=U(),n=r.isInsideApp,i=r.isGAOldApp,o=r.isGAOldIOS,a=r.isPocoApp,c="";if(!(n&&!i&&!o&&!a)||Number(e.get("APPVERSION"))<=40402||Number(e.get("IOSVERSION"))<=40504)c=e.get(t)||void 0;else try{"1"===e.get("ISIOS")?(window.webkit.messageHandlers.getStringPref.postMessage(t.split("_ot_")[1]),setTimeout((function(){c=window.ITEM_LIST[t.split("_ot_")[1]]||void 0}),1e3)):window.WE&&window.WE.trackEvent&&"function"==typeof window.WE.trackEvent&&(c=window.WE.getStringPref(t.split("_ot_")[1])||void 0)}catch(s){console.log("get module name-id error")}return new Promise((function(t){try{Number(e.get("IOSVERSION"))>40504&&"1"===e.get("ISIOS")?setTimeout((function(){t(c)}),1e3):t(c)}catch(s){t(c)}}))}function ue(e,t){return Object.prototype.toString.call(e)==="[object ".concat(t,"]")}function de(){var e=C();return["kh-en"].includes(e)?e:e.split("-")[0]}window.ITEM_LIST={},window.getStringPref=function(e){Object.assign(window.ITEM_LIST,e)};var le=function(){return le=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},le.apply(this,arguments)},pe=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(c){i={error:c}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},me=function(t){if(!te())return window.__PAGE_VIEW_DATA__=t,"";var r=document.querySelector("body"),n=pe(t.tip instanceof Object?[0,t.tip.b]:String(t.tip||"").split("."),2)[1];if(n&&r&&r.setAttribute("data-ot-page",String(n||0)),t.pageType){var i=t.pageType;r&&r.setAttribute("data-ot-pageType",String(i||""))}return function(){var r,n=S(t.tip)||"",i={tip:n||"",commodity_id:z(t.commodityId,""),product_id:z(t.productId,""),goods_id:z(t.goodsId,""),tag:z(t.tag,""),version:z(t.version,""),exp_id:z(t.expId,"")};(t.viewTipDisabledB||t.viewTipEnabledE)&&function(e){if(Y())try{sessionStorage.setItem("DISABLED_B",JSON.stringify(e.rangeB||[])),sessionStorage.setItem("ENABLED_E",JSON.stringify(e.rangeE||[]))}catch(t){console.debug(t)}}({rangeB:t.viewTipDisabledB||[],rangeE:t.viewTipEnabledE||[]});var o,a,c=J(i,t.extra);if(te()&&function(t){var r=v(O().split("."),2)[1],n=v((t||"").split("."),2)[1],i=e.get("_ot_ref_b")||"",o=C();r!==n&&r===i||E(""),o&&e.set("_ot_ref_b",n||"",q(o))}(n),G("view",c),window.dataLayer&&t.isOpenGA){var s=C(),l=k(),p=b(s),m=u(s),f=Number(m["pc"===l?"pc":"m"]),h=le({event:"page_view",muserid:e.get("mUserId")||void 0,guserid:e.get("guserid")||void 0,instance_id:p||void 0,app_id:d(c.local).APP_ID||void 0,tip:n,ref_tip:O()||void 0,page:re(),page_version:X()||void 0,tz:(o=(new Date).getTimezoneOffset(),a=Math.abs(o),"GMT".concat(o>0?"-":"+").concat("00".concat(Math.floor(a/60)).slice(-2),":").concat("00".concat(a%60).slice(-2))||void 0),site_country:de()||void 0,last_source:P(s)||void 0,app_platform:l||void 0,ot_ua:(null===(r=null===window||void 0===window?void 0:window.navigator)||void 0===r?void 0:r.userAgent)||void 0,utm_channel:L(s,"utm_channel",H("utm_channel"))||void 0,utm_content:L(s,"utm_content",H("utm_content"))||void 0,utm_term:L(s,"utm_term",H("utm_term"))||void 0,utm_type:L(s,"utm_type",H("utm_type"))||void 0,utm_campaign:L(s,"utm_campaign",H("utm_campaign"))||void 0,utm_source:L(s,"utm_source",H("utm_source"))||void 0,utm_medium:L(s,"utm_medium",H("utm_medium"))||void 0,channel_group:Q("channel_group")||void 0,req_from:Q("req_from")||void 0,page_type:K(t.pageType||void 0,""),page_referrer:R(s)||void 0,domain_id:"".concat(f)||void 0,category_id:K(t.categoryId,""),category_name:K(t.categoryName,""),parent_category_id:K(t.parentCategoryId,""),parent_category_name:K(t.parentCategoryName,""),moe_enable:K(t.moeEnable,!1),abtest_group:e.get("xm_user_bucket")||void 0,abtest_group1:e.get("xm_user_bucket1")||void 0,abtest_group2:e.get("xm_user_bucket2")||void 0,language:K(N()),login_status:e.get("cUserId")||e.get("userId")||e.get("serviceToken")?"yes":"no"},T(n));W(Object.assign({},h,{event:"basic_config"})),setTimeout((function(){W(h)}),0)}return n}()},fe=function(){return fe=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},fe.apply(this,arguments)},he=function(e,t){var r=S(e.tip,t)||"";if(!r&&"login"!==e.event||!te())return"";var n=Object.assign({},e),i=C(),o=ae([n.commodityId,n.productId,n.itemId,n.spuId].filter((function(e){return!!e})));if(window.dataLayer){var a=K(N()),c="page_view"===n.event&&a?{language:a}:{};W(fe(fe({event:n.event,element_name:K(n.elementName,""),element_title:K(n.elementTitle,""),tip:r,link:K(j(n.linkUrl||n.link),""),ref_tip:O()||void 0,page_type:K(n.pageType||!!document.body&&document.body.getAttribute("data-ot-pageType")||void 0,""),page_version:X()||void 0,asset_link:K(j(n.assetLink),""),asset_id:K(n.assetId,""),live_id:K(n.liveId,""),alg:K(n.alg,""),alg_ver:K(n.algVer,""),alg_group:K(n.algGroup,""),activity_id:K(n.activityId||n.eventId,""),search_result:K(n.searchResult||n.result,""),search_word:K(n.searchWord,""),search_type:K(n.searchType,""),commodity_id:K(o.commodityId,"")?"".concat(K(o.commodityId,"")):void 0,coupon_list:K(n.couponList,""),coupon_status:K(n.couponStatus,""),product_id:K(o.productId,"")?"".concat(K(o.productId,"")):void 0,tag:K(n.tag,""),spu_id:K(o.spuId,"")?"".concat(K(o.spuId,"")):void 0,item_name:K(n.itemName,""),item_id:K(o.itemId,"")?"".concat(K(o.itemId,"")):void 0,version:K(n.version,""),exp_id:K(n.expId,""),commentNbrofTotal:Number(n.commentNbrofTotal||0),page_referrer:R(i)||void 0,category_id:K(n.categoryId,""),category_name:K(n.categoryName,""),parent_category_id:K(n.parentCategoryId,""),parent_category_name:K(n.parentCategoryName,""),product_total_count:K(n.productTotalCount),type:K(n.type,""),model:K(n.model,""),moe_enable:K(n.moeEnable,!1),notify_me_click_date:K(n.notifyMeClickDate,""),button_name:K(n.buttonName,""),guserid:K(n.guserid,""),card_type:K(n.cardType,""),order_delivery_date:K(n.orderDeliveryDate,""),order_address:K(n.orderAddress,""),order_city:K(n.orderCity,""),coupon_applied:K(n.couponApplied,""),style:K(n.style,""),grouping_name:K(n.groupingName,"")},c),T(r)))}return r},ve=function(t){if(t.userId){var r="1"===e.get("isFromPassport");if(D(t.local,"isFromPassport",{path:"/"}),"function"==typeof window.onetrack){if(B())return;window.onetrack("login",t.userId,t.accountType,t.extraParams,!r)}r&&he({event:"login",tip:"",guserid:e.get("guserid")||void 0,pageType:"login"})}},ge=function(e){if("function"==typeof window.onetrack){if(B())return;window.onetrack("logout",e)}"function"==typeof window.gtag&&window.gtag("event","logout",e)},ye={NAVIGATION:"navigation",RESOURCE:"resource"},_e="P",we="B",be="H",Se="L",Te="C",Ie={CACHE:"c",NO_CACHE:"n",UNKNOWN:"o"},Ee={"product-station":[{matchType:"include",file:"html",rule:"",entryType:"navigation",initiatorType:"navigation"},{matchType:"reg",file:"static.js",rule:new RegExp(/\/static\//),entryType:"resource",initiatorType:"script"},{matchType:"reg",file:"getgoodsinformation",rule:new RegExp(/getgoodsinformation/),entryType:"resource",initiatorType:"xmlhttprequest"},{matchType:"reg",file:"img",rule:new RegExp(/800x800/),entryType:"resource",initiatorType:"img"}]},Oe=["spps_files","dist","overseas"],Ce=["unpkg.com","pubsub","cookie-clear","xmot","autotrack"],Ne=[".mi.com/",".mi.co.id/"],ke=["cookie-config"],Ae={htmlTime:{duration:-1},jsTime:{startTimeEarliest:-1,startTimeLatest:-1,durationShortest:-1,durationLongest:-1,durationAverage:-1,downloadAverage:-1,cacheType:"o"},fxTime:{startTimeEarliest:-1,startTimeLatest:-1,durationShortest:-1,durationLongest:-1,durationAverage:-1,downloadAverage:-1}},Pe="V",xe="T",Re="EX",Le="hd",De="ls",qe="ld",Me="j",je="J",Ue="jd",Ve="JD",Fe="ja",We="jA",Be="c",Ge="f",He="F",Je="fd",ze="FD",Ke="fa",$e="fA",Ze=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(c){i={error:c}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},Xe=function(e,t,r){if(r||2===arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))},Ye=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};function Qe(){return{htmlTime:(t=(null===(e=performance.getEntriesByType(ye.NAVIGATION))||void 0===e?void 0:e[0])||{},{duration:Math.trunc(t.responseEnd-t.startTime||0)}),jsTime:tt({initiatorType:["script"],whiteList:Oe,blackList:Ce,isCollectCacheType:!0}),fxTime:tt({initiatorType:["fetch","xmlhttprequest"],whiteList:Ne,blackList:ke})};var e,t}function et(){var e,t,r,n,i,o,a,c,s=Object.assign({},Ae,window.performanceResultDetail),u=function(e){void 0===e&&(e=[]);var t=Array.from(e)[0]||{time:0,domTag:""},r=performance.getEntriesByName(t.domTag||"")[0]||{};return{name:nt(t.domTag),time:Math.ceil(t.time)||0,duration:Math.trunc(r.duration)||"-",startTime:Math.trunc(r.startTime)||"-"}}(null===(n=window.performanceResult)||void 0===n?void 0:n.fmpSlowComp),d=ue(null===window||void 0===window?void 0:window.performanceResult,"Object")&&ue(null===(i=null===window||void 0===window?void 0:window.performanceResult)||void 0===i?void 0:i.loadType,"String")?(null===(o=null===window||void 0===window?void 0:window.performanceResult)||void 0===o?void 0:o.loadType).slice(0,1):"",l=Array.isArray(null===(a=window.performanceResult)||void 0===a?void 0:a.fmpSlowComp)?u.time:null===(c=window.performanceResult)||void 0===c?void 0:c.pageLoad;return{perf:JSON.stringify((e={P:null!=l?l:0},e[Pe]="0924",e[xe]=d,e[Re]=it(),e[Le]=s.htmlTime.duration,e[De]=u.startTime,e[qe]=u.duration,e)),perf1:JSON.stringify((t={},t[Me]=s.jsTime.startTimeEarliest,t[je]=s.jsTime.startTimeLatest,t[Ue]=s.jsTime.durationShortest,t[Ve]=s.jsTime.durationLongest,t[Fe]=s.jsTime.durationAverage,t[We]=s.jsTime.downloadAverage,t[Be]=s.jsTime.cacheType,t)),perf2:JSON.stringify((r={},r[Ge]=s.fxTime.startTimeEarliest,r[He]=s.fxTime.startTimeLatest,r[Je]=s.fxTime.durationShortest,r[ze]=s.fxTime.durationLongest,r[Ke]=s.fxTime.durationAverage,r[$e]=s.fxTime.downloadAverage,r))}}function tt(e){var t=e.initiatorType,r=e.whiteList,n=e.blackList,i=e.isCollectCacheType,o=void 0!==i&&i,a=[],c=[],s=0,u=[],d=0,l=performance.getEntriesByType(ye.RESOURCE).filter((function(e){return t.includes(e.initiatorType)&&(!(null==r?void 0:r.length)||r.some((function(t){return e.name.includes(t)})))&&(!(null==n?void 0:n.length)||!n.some((function(t){return e.name.includes(t)})))}));return l.forEach((function(e){a.push(e.startTime),c.push(e.duration),s+=e.duration,u.push(e.responseEnd-e.responseStart),d+=e.responseEnd-e.responseStart})),Object.assign({},l.length?{startTimeEarliest:Math.trunc(Math.min.apply(Math,Xe([],Ze(a),!1))),startTimeLatest:Math.trunc(Math.max.apply(Math,Xe([],Ze(a),!1))),durationShortest:Math.trunc(Math.min.apply(Math,Xe([],Ze(c),!1))),durationLongest:Math.trunc(Math.max.apply(Math,Xe([],Ze(c),!1))),durationAverage:Math.trunc(s/l.length),downloadAverage:Math.trunc(d/l.length)}:{startTimeEarliest:-1,startTimeLatest:-1,durationShortest:-1,durationLongest:-1,durationAverage:-1,downloadAverage:-1},o?{cacheType:rt(l)}:{})}function rt(e){var t,r,n=new Map;return e.forEach((function(e){var t,r="transferSize"in(t=e)?0===t.transferSize?Ie.CACHE:Ie.NO_CACHE:Ie.UNKNOWN;n.set(r,(n.get(r)||0)+1)})),(null===(r=null===(t=Array.from(n).sort((function(e,t){return t[1]-e[1]})))||void 0===t?void 0:t[0])||void 0===r?void 0:r[0])||Ie.UNKNOWN}function nt(e){try{if(!e)return"";var t=e.split(/[?#]/)[0].split("/"),r=t[t.length-1];return r||""}catch(n){return e}}function it(){var e,t,r,n=[];try{for(var i=Ye(Object.values(ye)),o=i.next();!o.done;o=i.next()){var a=o.value,c=(null===(r=window.PerformanceObserver)||void 0===r?void 0:r.supportedEntryTypes)||[];c.length&&c.includes(a)||n.push(a[0])}}catch(s){e={error:s}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return n.join(",")}var ot=-1,at=function(e){addEventListener("pageshow",(function(t){t.persisted&&(ot=t.timeStamp,e(t))}),!0)},ct=function(){var e=self.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0];if(e&&e.responseStart>0&&e.responseStart<performance.now())return e},st=function(){var e=ct();return e&&e.activationStart||0},ut=function(e,t){var r=ct(),n="navigate";return ot>=0?n="back-forward-cache":r&&(document.prerendering||st()>0?n="prerender":document.wasDiscarded?n="restore":r.type&&(n=r.type.replace(/_/g,"-"))),{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:"v4-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:n}},dt=function(e,t,r){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var n=new PerformanceObserver((function(e){Promise.resolve().then((function(){t(e.getEntries())}))}));return n.observe(Object.assign({type:e,buffered:!0},r||{})),n}}catch(e){}},lt=function(e,t,r,n){var i,o;return function(a){t.value>=0&&(a||n)&&((o=t.value-(i||0))||void 0===i)&&(i=t.value,t.delta=o,t.rating=function(e,t){return e>t[1]?"poor":e>t[0]?"needs-improvement":"good"}(t.value,r),e(t))}},pt=function(e){requestAnimationFrame((function(){return requestAnimationFrame((function(){return e()}))}))},mt=function(e){document.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState&&e()}))},ft=function(e){var t=!1;return function(){t||(e(),t=!0)}},ht=-1,vt=function(){return"hidden"!==document.visibilityState||document.prerendering?1/0:0},gt=function(e){"hidden"===document.visibilityState&&ht>-1&&(ht="visibilitychange"===e.type?e.timeStamp:0,_t())},yt=function(){addEventListener("visibilitychange",gt,!0),addEventListener("prerenderingchange",gt,!0)},_t=function(){removeEventListener("visibilitychange",gt,!0),removeEventListener("prerenderingchange",gt,!0)},wt=function(){return ht<0&&(ht=vt(),yt(),at((function(){setTimeout((function(){ht=vt(),yt()}),0)}))),{get firstHiddenTime(){return ht}}},bt=function(e){document.prerendering?addEventListener("prerenderingchange",(function(){return e()}),!0):e()},St=[1800,3e3],Tt=function(e,t){t=t||{},bt((function(){var r,n=wt(),i=ut("FCP"),o=dt("paint",(function(e){e.forEach((function(e){"first-contentful-paint"===e.name&&(o.disconnect(),e.startTime<n.firstHiddenTime&&(i.value=Math.max(e.startTime-st(),0),i.entries.push(e),r(!0)))}))}));o&&(r=lt(e,i,St,t.reportAllChanges),at((function(n){i=ut("FCP"),r=lt(e,i,St,t.reportAllChanges),pt((function(){i.value=performance.now()-n.timeStamp,r(!0)}))})))}))},It=(new Map,function(e){var t=self.requestIdleCallback||self.setTimeout,r=-1;return e=ft(e),"hidden"===document.visibilityState?e():(r=t(e),mt(e)),r}),Et=[2500,4e3],Ot={},Ct=[800,1800],Nt=function e(t){document.prerendering?bt((function(){return e(t)})):"complete"!==document.readyState?addEventListener("load",(function(){return e(t)}),!0):setTimeout(t,0)},kt=function(e,t){t=t||{};var r=ut("TTFB"),n=lt(e,r,Ct,t.reportAllChanges);Nt((function(){var i=ct();i&&(r.value=Math.max(i.responseStart-st(),0),r.entries=[i],n(!0),at((function(){r=ut("TTFB",0),(n=lt(e,r,Ct,t.reportAllChanges))(!0)})))}))},At=(new Date,function(){return At=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},At.apply(this,arguments)}),Pt=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{s(n.next(e))}catch(t){o(t)}}function c(e){try{s(n.throw(e))}catch(t){o(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,c)}s((n=n.apply(e,t||[])).next())}))},xt=function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(c){return function(s){return function(c){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,n=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){a.label=c[1];break}if(6===c[0]&&a.label<i[1]){a.label=i[1],i=c;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(c);break}i[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(s){c=[6,s],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}},Rt=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r},Lt=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Dt=function(e,t){return void 0===t&&(t=0),e?e.toFixed(t).valueOf():void 0},qt=function(e){return Pt(void 0,void 0,void 0,(function(){var t;return xt(this,(function(r){return t=function(t){var r,n;if("TTFB"===t.name&&(null===(r=t.entries)||void 0===r?void 0:r.length)>0){var i=(null===(n=t.entries[0])||void 0===n?void 0:n.requestStart)||0;e[t.name]=Dt(t.value-i)}else e[t.name]=Dt(t.value)},function(e,t){t=t||{},bt((function(){var r,n=wt(),i=ut("LCP"),o=function(e){t.reportAllChanges||(e=e.slice(-1)),e.forEach((function(e){e.startTime<n.firstHiddenTime&&(i.value=Math.max(e.startTime-st(),0),i.entries=[e],r())}))},a=dt("largest-contentful-paint",o);if(a){r=lt(e,i,Et,t.reportAllChanges);var c=ft((function(){Ot[i.id]||(o(a.takeRecords()),a.disconnect(),Ot[i.id]=!0,r(!0))}));["keydown","click"].forEach((function(e){addEventListener(e,(function(){return It(c)}),!0)})),mt(c),at((function(n){i=ut("LCP"),r=lt(e,i,Et,t.reportAllChanges),pt((function(){i.value=performance.now()-n.timeStamp,Ot[i.id]=!0,r(!0)}))}))}}))}(t,{reportAllChanges:!0}),Tt(t,{reportAllChanges:!0}),kt(t,{reportAllChanges:!0}),[2]}))}))},Mt=function(){var t=this;this.platform=k(),this._customProductStation=function(){var e=A();e&&(Ee[e]||[]).forEach((function(e){var r,n;try{for(var i=Lt(performance.getEntries()),o=i.next();!o.done;o=i.next()){var a=o.value;a.entryType===e.entryType&&a.initiatorType===e.initiatorType&&("include"===e.matchType||"reg"===e.matchType&&e.rule.test(a.name))&&t.customArray.push({name:a.name,startTime:Dt(a.startTime),duration:Dt(a.duration),responseEnd:Dt(a.responseEnd)})}}catch(c){r={error:c}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}}))},this.collectStart=function(){},this.collectEnd=function(){"product-station"===A()&&"m"===t.platform&&t._customProductStation()},this.reportPerf=function(){var r,n,i,o,a;t.collectEnd();var c=C(),s=A(),u=et(),d=function(){var e=performance.getEntriesByType(ye.NAVIGATION)[0]||{},t=e.startTime,r=void 0===t?0:t,n=e.domainLookupEnd,i=void 0===n?0:n,o=e.domainLookupStart,a=void 0===o?0:o,c=e.secureConnectionStart,s=void 0===c?0:c,u=e.connectStart,d=void 0===u?0:u,l=e.connectEnd,p=void 0===l?0:l,m=e.responseStart,f=void 0===m?0:m,h=e.requestStart,v=void 0===h?0:h,g=e.responseEnd,y=void 0===g?0:g,_=e.redirectStart,w=void 0===_?0:_,b=Math.trunc(r),S=Math.trunc(i-a),T=Math.trunc(s-d),I=Math.trunc(p-s),E=Math.trunc(f-v),O=Math.trunc(y-f),C=Math.trunc(y);return{TTFB:Math.trunc(f-w),hst:b,he:C,hd:S,ht:T,hs:I,hr:E,hdl:O}}(),l=d.TTFB,p=Rt(d,["TTFB"]),m=null!==(n=null===(r=window.performanceResult)||void 0===r?void 0:r.metrics)&&void 0!==n?n:{};m.TTFB||(m.TTFB=String(l));var f={event:"performance",perf:u.perf,perf1:u.perf1,perf2:u.perf2,perf3:JSON.stringify(p),perf4:JSON.stringify(At(At({},m),{net:null!==(o=null===(i=window.performanceResult)||void 0===i?void 0:i.network)&&void 0!==o?o:""})),search_type:"",page_version:"",alg:"",alg_group:"",alg_ver:"",search_result:"",search_word:"",muserid:e.get("mUserId")||void 0,guserid:e.get("guserid")||void 0,instance_id:b(c)||void 0,page:re(),site_country:de()||void 0,app_platform:k()||void 0,ot_ua:(null===(a=null===window||void 0===window?void 0:window.navigator)||void 0===a?void 0:a.userAgent)||void 0,page_referrer:R(c)||void 0,page_type:s},h="";if("product-station"===s&&"m"===t.platform){var v={};t.customArray.forEach((function(e,t){v["p".concat(t+1,"_ST")]=e.startTime,v["p".concat(t+1,"_DR")]=e.duration,v["p".concat(t+1,"_RE")]=e.responseEnd})),h=JSON.stringify(v),f.alg=h.substring(0,100),f.alg_group=h.substring(100,200),f.alg_ver=h.substring(200,300),f.search_result=h.substring(300,400),f.search_word=h.substring(400,500),f.search_type=h.substring(500,600),f.page_version=h.substring(600,700)}return W(f),f},this.customArray=[],this.customPerf={}},jt=function(){return(new Mt).reportPerf},Ut=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(c){i={error:c}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},Vt=window.innerWidth,Ft=function(r,n){var i,o=U(),a=o.isOldAPP,c=o.isOldIOS,s=o.isOtherApp,l=o.isMihomeApp,p=o.isMicommunityApp,m=s?l?"mihome_sdk":p?"micommunity_sdk":"others":"1"===e.get("ISAPP")?"android":"1"===e.get("ISIOS")?"ios":r.platform||(Vt<=720?"m":"pc"),f=document.querySelector("html"),h=Ut(r.tip instanceof Object?[r.tip.a]:String(r.tip||"").split("."),1)[0];if(f&&f.setAttribute("data-ot-project",String(h||d(r.local).PRO_ID||0)),f&&f.setAttribute("data-ot-local",r.local),f&&f.setAttribute("data-ot-platform",m),"tw"===r.local)(v=Q("ichid"))&&e.set("ichid",v,{domain:".mi.com",path:"/tw",expires:30});else if(["sg","vn","my","th","id"].includes(r.local)){var v;(v=Q("click_id"))&&e.set("click_id",v,{domain:".mi.com",path:"/"+r.local,expires:30})}if(te()){if(window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"dle_consent_update"}),!("object"==typeof window&&"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype))(E=document.createElement("script")).src="//i01.appmifile.com/webfile/globalweb/stat/js/IntersectionObserver.min.js",document.head.appendChild(E);var g,y,_,b,S=document.querySelector("#xmot");if(!(B()||S&&window.onetrack)){window.onetrack=window.onetrack||function(){(window.onetrack.q=window.onetrack.q||[]).push(arguments)};var T=Z()?"cn":r.region||r.local||"cn",I=s||a||c?e.get("DEVICEID")||"undefined":(g=r.local,y="1"===e.get("_ot_use_type"),_=w(),b=!y&&!!_,e.set("_ot_use_type",b?"0":"1",q(g,{expires:730})),e.get("_ot_instance_id")||e.set("_ot_instance_id",oe(),q(g,{expires:new Date(Date.now()+34128e6)})),b?_:{type:"cookie",name:"_ot_instance_id",options:q(g,{expires:new Date(Date.now()+34128e6)})});window.onetrack("init",r.appId||d(r.local).APP_ID,"default",T,I||void 0);var E;(E=document.createElement("script")).src="//ssl-cdn.static.browser.mi-img.com/mistat-data/onetrack/onetrack.js",E.async=!0,E.id="xmot",document.head.appendChild(E)}if(!window.pubsub){window.pubsub=window.pubsub||function(){(window.pubsub.q=window.pubsub.q||[]).push(arguments)},window.pubsub("init",r.local.toUpperCase(),"4c17b4d1cfa2fb108700a15027ff54139f56ed9a","mi-store-pubsub","xiaomi-mistore-pubsub");var C=document.createElement("script");C.type="text/javascript",C.src="//i02.appmifile.com/i18n/pubsub/i18n-pubsub.js",C.setAttribute("async","async"),document.body.appendChild(C)}window.gtag||(window.gtag=window.gtag||function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];(window.dataLayer=window.dataLayer||[]).push(e)}),"cn"===r.region&&f&&f.setAttribute("data-ot-test","true"),B()?function(e){x(e),D(e,"_ot_update_flag"),M(e);var t=["utm_type","utm_channel","utm_campaign","utm_source","utm_medium","utm_term","utm_content"];t.map(H).some((function(e){return!!e}))&&D(e,t.map((function(e){return"_ot_".concat(e)})))}(r.local):function(e,t,r){var n=u(t),i=Number(n["pc"===r?"pc":"m"]);x(t),D(t,"_ot_update_flag"),M(t),e.onetrack("set","ref_tip",(function(){return O()})),e.onetrack("set","site_country",de()),e.onetrack("set","domain_id",i),e.onetrack("set","app_platform",r),e.onetrack("set","page",(function(){return re()})),e.onetrack("set","page_version",X()),e.onetrack("set","lastsource",(function(){return P(t)})),e.onetrack("set","session_id",(function(){return M(t)}));var o=["utm_type","utm_channel","utm_campaign","utm_source","utm_medium","utm_term","utm_content"],a=o.map(H);a.some((function(e){return!!e}))&&D(t,o.map((function(e){return"_ot_".concat(e)})));o.forEach((function(r,n){e.onetrack("set",r,(function(){return L(t,r,a[n])}))}))}(window,r.local,m),n&&n instanceof Function&&n(window,r.local);var N=e.get("mUserId")||"";if(N)ve({local:r.local,userId:N});else if(function(){var e="temp";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(t){return!1}}()){(localStorage.getItem("_onetrack_uid")||"")&&ge()}if(r.tip){var k=Object.assign(r,{tip:r.tip});me(k)}var A=new t.RI({system:"海外小米网",group:"BJ-MICOM",env:Z()?"test":"pro",withoutFMP:!1,container:"#root",excludeNodes:["span#teconsent.text-with-inline-end-border",".product__article",".buy-container",".lazy",".pin-spacer","div.product-result-item_figure"],maxWait:8e3,domWait:3e3,manualTrack:!0,fmpOptions:{calcType:"document",eleWeight:{SVG:2,IMG:7,CANVAS:4,OBJECT:4,EMBED:4,VIDEO:4},domFilter:function(e){return!(null==e?void 0:e.width)||!(null==e?void 0:e.height)||(e.width>30||e.height>12)},wh:"*1"}},(function(e,t){window.performanceResult=e,window.statusCollector=t,window.performanceResult.metrics={},qt(window.performanceResult.metrics)}));window.isInitTrack||(A.initTrack(),window.isInitTrack=1,console.log("initTrack had run"));var R=null,j=!1,V="";window.addEventListener("load",(function(){j=!0,V=Se,window.performanceResultDetail=Qe(),R=jt(),"1"===e.get("ISAPP")&&R(V)})),(null===(i=window.document)||void 0===i?void 0:i.addEventListener)&&window.document.addEventListener("readystatechange",(function(){var e;"complete"===(null===(e=window.document)||void 0===e?void 0:e.readyState)&&(j=!0,V=Te,window.performanceResultDetail=Qe())}));var F,W,G,J=!1;F=function(){if(window.currentPath!==window.location.pathname){window.currentPath=window.location.pathname;var e=j?V:_e;R&&"function"==typeof R?R(e):(R=jt())(e)}},W=window.history,G=function(e){var t=W[e];return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var i=new Event(e.toLowerCase());return t.apply(W,r),window.dispatchEvent(i),t}},window.history.pushState=G("pushState"),window.history.replaceState=G("replaceState"),window.addEventListener("pushstate",F,!1),window.addEventListener("replacestate",F,!1),window.addEventListener("popstate",F,!1),window.onbeforeunload=function(){J=!0,window.performanceResultDetail=Qe();var e=j?V:we;R&&"function"==typeof R?R(e):(R=jt())(e)},window.onpagehide=function(){if(!J){var e=j?V:be;R&&"function"==typeof R?R(e):(R=jt())(e)}},window.currentPath=window.location.pathname}};var Wt=function(t,r){var n,i,o,a,c,s,u,d=S(t.tip,r)||"";if(G("click",J({tip:d,module_pos:z(t.modulePos),module_title:z(t.moduleTitle,""),element_name:z(t.elementName,""),element_title:z(t.elementTitle,""),link:z(j(t.linkUrl||t.link),""),asset_link:z(j(t.assetLink),""),commodity_id:z(t.commodityId,""),product_id:z(t.productId,""),goods_id:z(t.goodsId,""),tag:z(t.tag,""),version:z(t.version,""),exp_id:z(t.expId,""),sub_module_pos:z(t.subModulePos),sub_module_name:z(t.subModuleName,""),sub_module_title:z(t.subModuleTitle,""),button_name:z(t.buttonName,""),notify_me_click_date:z(t.notifyMeClickDate,""),moe_enable:z(t.moeEnable,!1)},t.extra)),window.dataLayer&&t.isOpenGA){var l=Object.assign({},t,t.extra,{event:"click"});he(l,r)}return d&&(t.linkUrl||t.link)&&!t.isNotJump&&(E(d),n=d,i=C(),o=v((n||"").split("."),5),a=o[1],c=o[4],s=Y()?JSON.parse(sessionStorage.getItem("DISABLED_B")||"[]").map((function(e){return Number(e||0)})):[],u=Y()?JSON.parse(sessionStorage.getItem("ENABLED_E")||"[]").map((function(e){return Number(e||0)})):[],(!~s.indexOf(Number(a||0))||~u.indexOf(Number(c||0)))&&i&&e.set("_ot_view_tip",n||"",q(i))),d},Bt=function(e,t,r){void 0===r&&(r={});var n=r.beforeReport,i=r.afterReport;Array.from(document.querySelectorAll(e.targetSelector||"[data-ot-click]")).forEach((function(r){var o=r&&r.getAttribute("data-ot-tip")||"",a=r&&r.getAttribute(e.targetDataAttr||"data-ot-click")||"{}",c={};try{c=JSON.parse(a)}catch(l){Z()&&console.warn("JSON string [".concat(a,"] is invalid!"))}var s="function"==typeof t?t(c,r):c,u=!0;if("function"==typeof n&&(u=n(s,r)),u){var d=Object.assign(s,o?{tip:o}:{});r.addEventListener("click",(function(e){Wt(d,e.currentTarget||void 0),"function"==typeof i&&i(s,r)}))}}))},Gt=function(){return Gt=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Gt.apply(this,arguments)},Ht=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{s(n.next(e))}catch(t){o(t)}}function c(e){try{s(n.throw(e))}catch(t){o(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,c)}s((n=n.apply(e,t||[])).next())}))},Jt=function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(c){return function(s){return function(c){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,n=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){a.label=c[1];break}if(6===c[0]&&a.label<i[1]){a.label=i[1],i=c;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(c);break}i[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(s){c=[6,s],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}},zt=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Kt=function(e){var t,r;return Ht(this,void 0,void 0,(function(){var n,i,o,a,c,s,u,d,l,f,h,v,g,y,_,w,b,I,E,N,k,A;return Jt(this,(function(P){switch(P.label){case 0:if(!(n=S(e.tip||(null===(t=e.ecommerce)||void 0===t?void 0:t.tip))||"")||!te())return[2,""];if(i={},i=e.ecommerce?e:{event:e.event,ecommerce:Gt({items:[Gt({},e)]},e)},o=Object.assign({},i),a=[o.ecommerce.commodityId||o.ecommerce.commodity_id,o.ecommerce.productId||o.ecommerce.product_id,o.ecommerce.items[0].itemId||o.ecommerce.items[0].item_id,o.ecommerce.spuId||o.ecommerce.spu_id].filter((function(e){return!!e})),c=ae(a),!window.dataLayer)return[3,11];if(s=C(),u=T(n),d=[],!o.ecommerce||!o.ecommerce.items)return[3,8];P.label=1;case 1:P.trys.push([1,6,7,8]),l=zt(o.ecommerce.items),f=l.next(),P.label=2;case 2:return f.done?[3,5]:(h=f.value,v=h.itemName?h.itemName.toLowerCase().includes("poco")?"poco":h.itemName.toLowerCase().includes("redmi")?"redmi":"mi":"mi","select_item"===o.event&&(g=K(o.ecommerce.pageType||!!document.body&&document.body.getAttribute("data-ot-pageType")||void 0,""),y=K(h.itemListName,"")?"".concat(g,".").concat(K(h.itemListName,"")):void 0,_=K(h.itemListId,"")?"".concat(g,".").concat(K(h.itemListId,"")):"".concat(g,".").concat(u.tipC).concat(u.tipC1?"|".concat(u.tipC1):""),ce("_ot_item_list_name",K(y,"")),ce("_ot_item_list_id",K(_,""))),[4,ne(o.event,h,u,o)]);case 3:w=P.sent(),E=Gt({price:m(s)?Number(h.price||0):0,item_brand:K(h.itemBrand||h.item_brand||v,""),item_category:K(h.itemCategory||h.item_ategory,""),item_variant:K(h.itemVariant||h.item_variant,""),quantity:Number(h.quantity||0),item_category2:K(h.itemCategory2,""),item_id:K(c.itemId,"")?"".concat(K(c.itemId,"")):"undefined",item_name:(null===(r=K(h.itemName||h.item_name,""))||void 0===r?void 0:r.replace(/<.*?>/g," ").replace(/ +/g," "))||"undefined",promotion_id:K(h.promotionId||h.promotion_id,""),promotion_name:K(h.promotionName||h.promotion_name,""),creative_name:K(h.creativeName||h.creative_name,""),creative_slot:K(h.creativeSlot||h.creative_slot,"")},w),d.push(E),P.label=4;case 4:return f=l.next(),[3,2];case 5:return[3,8];case 6:return b=P.sent(),k={error:b},[3,8];case 7:try{f&&!f.done&&(A=l.return)&&A.call(l)}finally{if(k)throw k.error}return[7];case 8:return o.ecommerce.items&&0!==o.ecommerce.items.length?[3,10]:[4,ne(o.event,{},u,o)];case 9:I=P.sent(),E=Gt({price:0,item_brand:void 0,item_category:void 0,item_variant:void 0,quantity:0,item_category2:void 0,item_id:"undefined",item_name:"undefined",promotion_id:void 0,promotion_name:void 0,creative_name:void 0,creative_slot:void 0},I),d.push(E),P.label=10;case 10:N=o.ecommerce||{},W({event:o.event,ecommerce:Gt({currency:p(s).currencyCode,alg:K(N.alg,""),alg_ver:K(N.algVer,""),alg_group:K(N.algGroup,""),transation_id:K(N.transationId,""),status:K(N.status,""),payment_type:K(N.paymentType,""),tag:K(N.tag,""),stock:K(N.stock,""),shipping_tier:K(N.shippingTier,""),search_result:K(N.searchResult||N.result,""),search_word:K(N.searchWord,""),search_type:K(N.searchType,""),shipping:m(s)?Number(N.shipping||0):0,tax:m(s)?Number(N.tax||0):0,link:K(j(N.linkUrl||N.link),""),tr_promo_code:K(N.trPromoCode,""),tr_promo_price:m(s)?Number(N.trPromoPrice||0):0,value:m(s)?Number(N.value||0):0,page_referrer:R(s)||void 0,page_version:X()||void 0,version:K(N.version,""),spu_id:K(c.spuId,"")?"".concat(K(c.spuId,"")):void 0,product_id:K(c.productId,"")?"".concat(K(c.productId,"")):void 0,commodity_id:K(c.commodityId,"")?"".concat(K(c.commodityId,"")):void 0,tip:n,ref_tip:O()||void 0,element_name:K(N.elementName,""),element_title:K(N.elementTitle,""),promo_code:K(N.promoCode||N.promo_code,""),promo_price:m(s)?Number(N.promoPrice||0):0,page_type:K(N.pageType||!!document.body&&document.body.getAttribute("data-ot-pageType")||void 0,""),button_name:K(N.buttonName,""),style:K(N.style,""),grouping_name:K(N.groupingName,""),image_url:K(N.imageUrl,""),category_name:K(N.categoryName,""),category_id:K(N.categoryId,""),parent_category_id:K(N.parentCategoryId,""),parent_category_name:K(N.parentCategoryName,""),source:K(N.source,""),revenue:K(N.revenue,"")?"".concat(K(N.revenue,"")):void 0,the_final_amount_user_pays:K(N.ThefinalAmountUserPays,""),discount_vaue:K(N.discountVaue,"")?"".concat(K(N.discountVaue,"")):void 0,order_pin_code:K(N.orderPinCode,"")?"".concat(K(N.orderPinCode,"")):void 0,number_of_search_resuts:m(s)?Number(N.numberOfSearchResuts||0):0,purchase_amount:K(N.purchaseAmount,""),items:d},u),moe_enable:K(N.moeEnable,"")},!0),P.label=11;case 11:return[2,n]}}))}))},$t=function(){return $t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},$t.apply(this,arguments)},Zt=function(e,t){var r=S(e.tip,t)||"";if(G("expose",J({tip:r,module_pos:z(e.modulePos),module_title:z(e.moduleTitle,""),element_name:z(e.elementName,""),element_title:z(e.elementTitle,""),link:z(j(e.linkUrl||e.link),""),asset_link:z(j(e.assetLink),""),commodity_id:z(e.commodityId,""),product_id:z(e.productId,""),goods_id:z(e.goodsId,""),tag:z(e.tag,""),version:z(e.version,""),exp_id:z(e.expId,""),sub_module_pos:z(e.subModulePos),sub_module_name:z(e.subModuleName,""),sub_module_title:z(e.subModuleTitle,""),button_name:z(e.buttonName,"")},e.extra)),window.dataLayer&&e.isOpenGA){var n=Object.assign({},e,e.extra,{event:"expose"});he(n,t)}return r},Xt=function(e,t,r){void 0===r&&(r={});var n=r.beforeReport,i=r.afterReport,o=Array.from((e.targetNodeWrapper||document).querySelectorAll(e.targetNodeSelector||"[data-ot-expose]"));if("function"==typeof IntersectionObserver){var a={root:e.targetRootSelector&&document.querySelector(e.targetRootSelector)||null,rootMargin:e.targetRootMargin||"0px",threshold:void 0===e.exposeThreshold?.3:e.exposeThreshold},c=new IntersectionObserver((function(r){r.forEach((function(r){if(!(r.intersectionRatio<=0)&&r.isIntersecting){var o=r.target||{},a=o&&o.getAttribute("data-ot-tip")||"",s=o&&o.getAttribute(e.targetNodeDataAttr||"data-ot-expose")||"{}",u={};try{u=JSON.parse(s)}catch(f){Z()&&console.warn("JSON string [".concat(s,"] is invalid!"))}var d="function"==typeof t?t(u,o):u,l=!0;if("function"==typeof n&&(l=n(d,o)),l){if(Zt(Object.assign({},d,a?{tip:a}:{},{isOpenGA:!1}),o),window.dataLayer){var p=Object.assign(d,a?{tip:a}:{});if(d.isOpenGA)if("ecommerce"===p.eventType){var m={event:p.event,ecommerce:p.ecommerce};p.ecommerce||(m={event:p.event,ecommerce:$t({items:[$t({},p)]},p)}),Kt(m,o)}else p.event=p.event||"expose",he(p,o)}"function"==typeof i&&i(d,o),!e.isInfinite&&c.unobserve(o)}}}))}),a);return o.forEach((function(e){c.observe(e)})),c}console.warn("Loading polyfill for IntersectionObserver")},Yt=function(e){var t=S(e.tip)||"";return G("slide",J({tip:t,link:z(j(e.linkUrl||e.link),""),asset_link:z(j(e.assetLink),""),asset_id:z(e.assetId,""),commodity_id:z(e.commodityId,""),product_id:z(e.productId,""),goods_id:z(e.goodsId,""),tag:z(e.tag,""),alg:z(e.alg,""),alg_ver:z(e.algVer,""),alg_group:z(e.algGroup,"")},e.extra)),t},Qt=function(e){var t=S(e.tip)||"";return G("add_cart",J({tip:t,commodity_id:z(e.commodityId,""),product_id:z(e.productId,""),goods_id:z(e.goodsId,""),tag:z(e.tag,""),goods_count:z(e.goodsCount,1),goods_amount:z(e.goodsAmount,0),parent_goods_id:z(e.parentGoodsId,0),bundle_id:z(e.bundleId,0)},e.extra)),t},er=function(){var e=document.querySelector("body");e&&e.removeAttribute("data-ot-page")},tr=function(e,t){var r=S(t.tip)||"",n={tip:r};Object.keys(t).forEach((function(e){n[e.replace(/([A-Z])/g,"_$1").toLowerCase()]=z(t[e])})),n.tip=r,G(e,n)},rr=function(){return rr=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},rr.apply(this,arguments)},nr=function(t){if(te()&&window.pubsub){var r=C(),n=k(),i=b(r),o=window.navigator.userAgent,a=o.match(/Android.*; ?(.*(?= Build))/),c=o.match(/iPhone OS .*?(?= )/),s=a&&a[1],u=c&&c[0],d={fr:"EU",es:"EU",it:"EU",uk:"EU",nl:"EU",pl:"EU",de:"EU",in:"IN",ru:"RU",default:"SG"},l=void 0;l="1"===e.get("ISIOS")?e.get("DEVICEID")||void 0:"1"===e.get("ISAPP")?e.get("RECOMMENDID")||e.get("DEVICEID")||void 0:i;var p=K(N()),m="page_view"===t.eventName&&p?{language:p}:{},f={B:rr({instance_id:l,item_id:t.itemId,Device:void 0,"Device model":o.includes("Android")?s:o.includes("iPhone")?u:void 0,app_platform:n||void 0,event_name:t.eventName,page_type:t.pageType},m),attributes:{region:C().toUpperCase(),area:d[C()]||d.default}};!function(t){var r=U(),n=r.isUseMiCommand,i=r.isOtherApp,o=r.isPocoApp,a="xiaomi://MiEventTrackCommand?action=logPubSub&params="+encodeURIComponent(t);!i&&n&&!o&&"1"===e.get("ISIOS")&&Number(e.get("IOSVERSION"))>=40802?window.location.assign(a):!i&&!o&&"1"===e.get("ISAPP")&&Number(e.get("APPVERSION"))>=40800?prompt(a):null===window||void 0===window||window.pubsub("pub",t)}(JSON.stringify(f))}};const ir=function(){var e=window.xmot&&window.xmot.q;window.xmot=or,e instanceof Array&&!!e.length&&e.forEach((function(e){try{or.apply(void 0,e)}catch(t){}}));return or}();function or(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n={init:Ft,view:me,click:Wt,clickWith:Bt,expose:Zt,exposeWith:Xt,slide:Yt,addCart:Qt,login:ve,logout:ge,exit:er,performance:jt,default:tr,custom:he,ecommerce:Kt,getSettings:ee,pubSubPush:nr};return(n[e]||n.default).apply(void 0,t)}})(),n=n.default})()));